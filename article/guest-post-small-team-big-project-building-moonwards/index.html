<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Godot Engine"><meta name=description content="Moonwards is an in-development open source sandbox MMO built with Godot. In this guest post, some members of the Moonwards team give us insights into how they approach building such a complex project with Godot."><meta name=theme-color content="#3d8fcc"><meta property="og:site_name" content="Godot Engine"><meta property="og:url" content="https://godotengine.org/article/guest-post-small-team-big-project-building-moonwards/"><meta name=twitter:site content="@godotengine"><meta property="og:title" content="Guest post - “Small Team, Big Project”: Building Moonwards"><meta property="og:description" content="Moonwards is an in-development open source sandbox MMO built with Godot. In this guest post, some members of the Moonwards team give us insights into how they approach building such a complex project with Godot."><meta property="og:image" content="https://godotengine.org/storage/app/uploads/public/600/f16/4a1/600f164a1426d584796163.jpg"><meta property="og:type" content="article"><meta name=twitter:card content="summary_large_image"><title>Guest post - “Small Team, Big Project”: Building Moonwards</title><link rel=alternate type=application/rss+xml title="Godot News" href=/rss.xml><link rel=icon href=/assets/favicon.png sizes=any><link rel=icon href=/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=/assets/css/main.css?112><link rel=stylesheet href=/assets/css/tobii.min.css><link rel=preload as=font href=/assets/fonts/Montserrat-Bold.woff2 crossorigin><link rel=preload as=font href=/assets/fonts/Montserrat-ExtraBold.woff2 crossorigin><link rel=me href=https://mastodon.gamedev.place/@godotengine><input type=checkbox id=nav_toggle_cb><header><div class="container flex align-center"><div id=nav_head><a href=/ id=logo-link><img class=nav-logo src=/assets/logo.svg width=136 height=48 alt="Godot Engine">
<img class="nav-logo dark-logo" src=/assets/logo_dark.svg width=136 height=48 alt="Godot Engine"></a>
<label for=nav_toggle_cb id=nav_toggle_btn><img src=/assets/icons/hamburger.svg width=24 height=24 alt="Main menu"></label></div><nav id=nav><ul class=left><li><a href=/features/>Features</a><li class=only-on-mobile><a href=/showcase/>Showcase</a><li><a href=/blog/>Blog</a><li><a href=/community/>Community</a><li><a href=/contact/>About</a><li><a href=https://godotengine.org/asset-library/asset>Assets</a></ul><ul class=right><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=https://docs.godotengine.org>Docs</a><li><a href=https://docs.godotengine.org/en/stable/community/contributing/index.html>Contribute</a><li class=fund><a href=https://fund.godotengine.org>❤&#xFE0E; Donate</a></ul></nav></div></header><main><style>body{background-color:var(--background-color)}h1{margin-bottom:8px;margin-top:32px}:not(pre)>code{background:var(--code-background-color);padding:1px 4px;font-size:.95em;border-radius:3px}pre{background:var(--codeblock-background-color);color:var(--codeblock-color)}pre code{display:block;overflow-x:auto;padding:.5em}.date-big{line-height:2;margin-left:32px}article{background-color:var(--base-color);box-shadow:0 3px 2px rgba(0,0,0,.15)}figure{margin:0}figure img{margin:0}article img,article video{max-width:100%;height:auto;display:block;margin:auto;margin-top:16px;margin-bottom:16px}article h1{margin-top:64px}article h2,article h3,article h4{margin-top:42px}.article-info{display:flex;flex-direction:column;gap:8px}.article-metadata{display:flex;gap:24px;align-items:center;font-family:var(--header-font-family);margin-bottom:12px}@media(max-width:900px){.article-metadata{flex-direction:column;align-items:flex-start;gap:16px}}.article-author{color:var(--base-color-text-subtitle-date);font-weight:700;font-size:18px;flex-grow:1;display:flex;gap:12px;align-items:center}.article-author .avatar{border-radius:100%;margin:0}.article-author .by{color:var(--base-color-text-subtitle)}.article-metadata .date{color:var(--base-color-text-subtitle-date)}.article-metadata .date.post-recent-highlight{color:var(--post-recent-highlight-color);opacity:.8}.article-metadata .date.post-recent-highlight::after{font-size:80%;content:"NEW";border:2px solid var(--post-recent-highlight-color);padding:2px 3px;margin-left:8px}.tag.active{filter:saturate(.75)}@media screen and (min-width:900px){article .content{width:70%;margin:auto}}@media(max-width:900px){body{background-color:var(--base-color)}article{background-color:initial;box-shadow:none}article img:first-child,article video:first-child{max-width:100%}}</style><link rel=stylesheet href=/assets/css/highlight.obsidian.min.css><div class=container><article class=padded><div class="content article-container"><figure class=article-cover><img src=/storage/app/uploads/public/600/f16/4a1/600f164a1426d584796163.jpg title alt=" " class=rounded-lg style=width:100%;height:auto;background-color:initial></figure><div class=article-info><h1>Guest post - “Small Team, Big Project”: Building Moonwards</h1><div class=article-metadata><div class=article-author><span>By:</span>
<img class=avatar width=25 height=25 src=/assets/images/authors/calinou.png alt="Hugo Locurcio" loading=lazy>
<span class=by>Hugo Locurcio</span></div><span class=date data-post-date="2021-02-15 14:00:00 +0000">15 February 2021</span></div><div class=tags><a href=/blog/news><div class="tag active">News</div></a></div></div><div class="card card-warning"><p>This article is from <strong>February 2021</strong>, some of its contents might be outdated and no longer accurate.<br>You can find up-to-date information about the engine in the <a href=https://docs.godotengine.org/en/stable/>official documentation</a>.</div><div class=article-body><p><em><a href=https://www.moonwards.com/>Moonwards</a> is an in-development <a href=https://github.com/moonwards1/Moonwards-Virtual-Moon/>open source</a> sandbox MMO built with Godot. In this guest post, some members of the Moonwards team give us insights into how they approach building such a complex project with Godot.</em><p>We are the team behind <a href=https://www.moonwards.com/>Moonwards</a>, a sandbox MMO being built in Godot. Yes, we know that’s awfully ambitious. But that’s OK. The world needs something like this.</p><video title="Moonwards promo video" width=1280 height=720 controls>
<source src=/storage/app/media/moonwards-godotblog1.mp4 type=video/mp4>Sorry, your browser doesn't support embedded videos.</video><p>Moonwards is the experience of building a world together. That world is an advanced town on the moon designed on hard science and engineering. It starts with a vast set of habitats and infrastructure, and a detailed development timeline based on solid known technology. The community that takes up residence there – by making actual homes and offices – then brings it alive, fills it in, and advances it. Because this world depicts a future that is entirely feasible, it provides a unique reward – a sense that your participation influences the world towards a better future. For the same reason, it can call for support from a resource few games can – the industry devoted to building the future it depicts, that being the space industry.<p>We need to draw in the many space engineers out there starving for the kind of space development they imagined when they chose their careers. Moonwards gives them a place to express those visions, but they will need help from game developers interested in providing the tools they need to do so in a game environment. The Godot community is clearly the best one for this. From the beginning, we’ve financially supported Godot as much as we can. As Moonwards grows, it will be providing a series of add-ons back to the community for any project to use, adapted from our code. Our architecture is also being designed to be a platform for game devs looking for a great place to test, experiment, showcase, or browse other developers’ ideas.<p>Our three lovely devs can explain - Karim, Yael, and Zach. Read on…<h2 id=architecture---by-karim-rizk-project-manager>Architecture - by Karim Rizk, Project Manager</h2><p>Moonwards is meant to be an MMO, hence possibly thousands of game entities needing to be acted upon, then networked in real-time. This accounts for a lot of data going back and forth, and a need for accessible, predictable & clearly defined states. What’s more, Moonwards is meant to be a sandbox, eventually spanning a number of interactive dynamic systems.<h3 id=sounds-great-lets-try-ecs>Sounds great, let’s try ECS!</h3><p>I’m a big <a href=https://en.wikipedia.org/wiki/Entity_component_system>Entity Component System</a> advocate. I love the paradigm! But no, not this time. ECS is great, flexible, performant, it’s all you could wish for in many circumstances and it can be made invisible to the end user, while still providing a higher-level interface. More than that, it’s conveniently network-able code, you get beautiful GameStates out of the box – sequential data, vectorized iterations and all that lovely stuff. However, Godot is not ECS, simply put. Converting Godot to fit our needs in such a manner does prove troublesome and counter-productive, with the following in mind:<ul><li>The Godot Scene Tree is a tightly knit beast. Branches, leaves and all.<li>Chances are, custom engine additions would break on 4.0. And we will be migrating to 4.0.<li>Time-cost factor grows a lot. Which we’re very limited on.</ul><p>Not to misunderstand, it could have definitely been done. It’s more so about the trade off – is it worth it to commit the time? Do you even have the time? Our answers were mostly “no”. And so it was decided.<h3 id=the-s-is-for-no-thanks>The “S” is for “no thanks”</h3><p>So, Godot’s scene tree is already heavily composition-based. This is surely great, right? Right…
The problem here is, it’s mostly object-based composition. A scene could easily depend on its children, possibly its neighbors and parents to exist, and catch fire if they don’t. Godot lets you do that, although one could argue that if it doesn’t work, it’s the developers’ fault. That is exactly why we’re looking for an alternative - so there can be lots of developers who collaborate informally without things breaking.<p>It’s also meant for linear gameplay. Construct your scenes however, and they’ll work – it’s the definition of a “scripted game”. For a networked sandbox? That doesn’t work so much. We need predictability and our actors decoupled. We also need reusability where possible. This calls for another ECS concept: “<a href=https://ajmmertens.medium.com/building-an-ecs-2-archetypes-and-vectorization-fe21690805f9>Archetypes</a>”.
With that in mind, we set out to find a future proof alternative. One that is as intuitive and easy to use as the Scene Tree paradigm, and that complements it. And importantly, easily refactors down the line.<p>We unsarcastically present to you the Entity-Component-Tree paradigm.<h3 id=how-it-should-work--entity-component-nosystem>How it should work – Entity-Component-NoSystem</h3><p>The approach: leverage the Tree, keep everything composition-based and sneak in your entities unnoticed. Use the good parts of the engine. Create your base layer of code in migratable fashion, to be moved to GDNative later. This opens the door for your networking layer to produce game states, through Entities, while not being invasive, nor coupled to any part of the Tree.<p>And no, this is not actual ECS, but it gives us the flexibility we want. We have Archetypes, we have decoupled Entities, and simple, predictable building blocks. Minus the performance benefits of ECS. All while being a fit to the already existing Scene Tree structure, and only depending on core Godot features.<h3 id=the-rules>The rules</h3><ul><li>Entities are independent, decoupled beings. They can exist alone, and provide state regardless of the existence of their components, or the game for that matter.<li>Components are encapsulated, self-sufficient building blocks. They contain necessary extra data & logic to function on a given Archetype, and act upon their parent entity, or themselves.<li>Components run in order.<li>Ideally, only Entity states need be networked, components remain hidden to the network layer.</ul><p>To give an analogy, Entities are your SceneTree, and components are your Nodes. Kinda. Close enough? Following these rules, the result should be a global interface for all – or realistically, most – of your actors, and a plug-n-play style development cycle. Minimal coupling. An Entity would contain state and expand into multiple components, each unfolding into further data and logic.<p>A more complete explanation can be found <a href=https://0x0.st/NIm2>here</a>.<p><img src=/storage/app/media/SceneTreeLayout-Alternative.png alt="Alternative SceneTree layout diagram"><h2 id=add-on-the-npc-editor---by-yael-atletl-tools-programmer>Add-on: The NPC Editor - by Yael Atletl, Tools Programmer</h2><p>I’ve been a developer at Moonwards for 2 years now and though I’ve had many roles and done many things, from debugging, refactoring code, networking, fixing materials and more, lately I’m the NPCs and tools guy. I made the Dialog system (and its editor), the Workstations and Navigation system and most importantly, the NPC Editor - and the NPCs that use it.<p>The editor has been a constantly evolving idea. It began as a simple interpretation of a Bungie Publications’ presentation that talked about Halo 3’s behavior trees. Later on, I learnt about State Machines and found out these two concepts could mix pretty well.<h3 id=the-current-concept>The current concept</h3><p>The NPC Editor creates State Machines and Behavior trees. The resulting NPC is a “State Machine” where every state is a different Behavior Tree.
The concepts of “Stimulus” (Signals), “Inhibitors” (functions with returns) and “Actions” (functions without returns) are the main components of the Behavior Tree.
The Behaviors and extra information, like the character’s name and colors, are stored in the State Machine.<p>To modify the signals and functions available to the tool, one has to modify the <code class="language-plaintext highlighter-rouge">Definitions.gd</code> file and create a script that extends NPCBase and contains your custom functions.
Even if the files generated by this tool are intended to be used inside Godot, they are not specific to the engine and could be used in Unity, Unreal Engine or a custom engine (with slight modifications to use their filesystem).</p><video title="NPC editor" width=1280 height=720 controls>
<source src=/storage/app/media/npc-editor.mp4 type=video/mp4>Sorry, your browser doesn't support embedded videos.</video><h3 id=whats-left-to-be-done>What’s left to be done?</h3><ul><li>As it currently stands, the State Machine that uses the NPC doesn’t change states in a particular, predictable order, and though that is the desired behavior for now, I plan to implement a way to specify which state or set of states loads next.<li>The addon currently depends on having cohesion on the programmers side: all the nodes defined in a special file (<code class="language-plaintext highlighter-rouge">Definitions.gd</code>) should have a function of the same name in a custom NPC Script that extends NPCBase. Ideally, the Definitions would be created at load, using the functions in the custom NPC script.<li>Currently there’s only support for the first input slot of a GraphNode, soon I’ll implement a way to set and get the NPC’s variables inside the Behavior Tree editor, so these can be used in other input slots.<li>There’s plenty of room for optimization, as many parts of the NPCBase could benefit from GDNative’s speed or using a different approach from signals and connections.</ul><p>You can read more about the development process <a href=https://810dude.blogspot.com/2021/01/NPC-Editor.html>here</a>.<h2 id=add-ons-the-logger-console-and-doc-generator---by-zachary-shea-programmer-and-ux-design>Add-ons: the Logger Console and Doc Generator - by Zachary Shea, Programmer and UX design</h2><p>You might know me from the Godot Discord as <em>Zach777#3000</em>. All the Moonwards devs wear many hats, but we still have a certain set of hats we wear more often. My frequent hats are UI programming, UX design and tool development. I take a lot of general programming tasks too, of course. While I would love to dive into my plans for improving Moonwards’ current UI code and the best practices I have learned, today I will be talking about the addons being developed because of Moonwards.<p>The addon I think will be the most useful no matter a project’s size is the custom Logger Console. Having detailed log messages helps when you are trying to test or debug. With the large number of log messages our scripts generate, the in-editor logger console cannot keep up and it is hard to use command line interfaces to read the log messages in real time. So we built a custom logger and a way to filter log messages by log type.<p>All log types can be toggled on or off. The custom Logger Console in game will then dynamically add or remove the logs messages from the shown log history that match that toggled type.</p><video title="Debug panel" width=1280 height=720 controls>
<source src=/storage/app/media/debug-panel.mp4 type=video/mp4>Sorry, your browser doesn't support embedded videos.</video><p>With just a little bit of work, we can make the Logger and Logger Console an add-on for anyone to use. There are a few features we would like to add first though before official addon release:<ul><li>Make the color schemes recognizable for all types of color blindness.<li>Variable displays. Quickly add variables to watch in real time from the console.<li>Filtering logs by class that generated the log.<li>Filter logs by the name of the node that made them.<li>Filter by group the node is in.<li>The addition of a temp log level that will store logs you make while testing code.<li>A setting for release versions to store logs in a way that is unobtrusive for players and easy for devs to check.</ul><p>Another addon that will be of help to the Godot community is the Docs Generator. A tool for automatically generating documentation by reading your project’s GDScript files. The documentation generated is styled like Godot’s read the docs pages. All generated docs will be saved as files in the directory of your choosing as Markdown files. This way you can choose how to best integrate them within your chosen documentation website. The tool is currently in early alpha, so not all features are implemented yet. You can take a look at the early prototype <a href=https://github.com/Zach777/Docs-Generator>here</a>. Connect with me on <a href=https://fosstodon.org/@Zach777>Fosstodon</a> or <a href=https://twitter.com/xXZach777Xx>Twitter</a>.<p>I have a lot planned after the initial alpha release of Moonwards. The two plans I am most excited for are refactoring Moonward’s UI scene and resource management to serve as an example of best practices. Our team’s other plan is making a tool for any project to let players make custom controls in game.<p><em>You can join the <a href=https://www.moonwards.com/>Moonwards</a> community on <a href=https://github.com/moonwards1/Moonwards-Virtual-Moon>GitHub</a>, <a href=https://discord.gg/x4A9FsZxFv>Discord</a> and <a href=https://www.reddit.com/r/Moonwards/>Reddit</a>.</em></div></div></article></div><link rel=stylesheet href=/assets/css/anchor-link.css?1><link rel=stylesheet href=/assets/css/article-cards.css?2><script src=/assets/js/anchor-link.js></script>
<script>document.addEventListener('DOMContentLoaded',()=>{window.applyAnchorLinks('.article-body'),document.querySelectorAll('.article-cover img, .article-body img').forEach(b=>{if(b.classList.contains('lightbox-ignore'))return;const a=document.createElement('a');a.href=b.src,a.classList.add('lightbox'),a.dataset.group='article',b.parentNode.appendChild(a),a.appendChild(b)})})</script></main><footer><div class="container flex footer-container"><div id=copyright><p>© 2007-2024 Juan Linietsky, Ariel Manzur and <a href=https://github.com/godotengine/godot/blob/master/AUTHORS.md target=_blank rel=noopener>contributors</a>.<br>Hosted by the <a href=https://godot.foundation/ target=_blank rel=noopener>Godot Foundation</a>.<br>Website <a href=https://github.com/godotengine/godot-website target=_blank rel=noopener>source code on GitHub</a>.</div><div id=sitemap><ul class=sitemap-group><li><strong>Get Godot</strong><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=/download/archive/>Release Archive</a><li><a href=https://editor.godotengine.org/releases/latest/>Web Editor</a><li>&nbsp;<li><strong>Public Relations</strong><li><a href=/blog/>Blog</a><li><a href=/community/>Communities and Events</a><li><a href=/press/>Press Kit</a></ul><ul class=sitemap-group><li><strong>About Godot</strong><li><a href=/features/>Features</a><li><a href=/showcase/>Showcase</a><li><a href=/education/>Education</a><li><a href=/license/>License</a><li><a href=/code-of-conduct/>Code of Conduct</a><li><a href=/privacy-policy/>Privacy Policy</a><li><a href=https://fund.godotengine.org>Donate</a></ul><ul class=sitemap-group><li><strong>Project Team</strong><li><a href=/governance/>Governance</a><li><a href=/teams/>Teams</a><li>&nbsp;<li><strong>Extra Resources</strong><li><a href=https://godotengine.org/asset-library/asset>Asset Library</a><li><a href=https://docs.godotengine.org>Documentation</a><li><a href=https://github.com/godotengine>Code Repository</a></ul></div><div id=social class=dark-desaturate><h4 class=text-right><a href=/contact/>Contact us</a></h4><div class="flex justify-space-between" style=gap:3px><a href=https://github.com/godotengine target=_blank rel=noopener><img src=/assets/footer/github_logo.svg width=32 height=32 alt=GitHub></a>
<a href=https://mastodon.gamedev.place/@godotengine target=_blank rel=noopener><img src=/assets/footer/mastodon_logo.svg width=32 height=32 alt=Mastodon></a>
<a href=https://twitter.com/godotengine target=_blank rel=noopener><img src=/assets/footer/twitter_logo.svg width=32 height=32 alt=Twitter></a>
<a href=https://www.facebook.com/groups/godotengine/ target=_blank rel=noopener><img src=/assets/footer/facebook_logo.svg width=32 height=32 alt=Facebook></a>
<a href=https://www.reddit.com/r/godot target=_blank rel=noopener><img src=/assets/footer/reddit_logo.svg width=32 height=32 alt=Red​dit></a>
<a href=/rss.xml target=_blank rel=noopener><img src=/assets/footer/feed_logo.svg width=32 height=32 alt="RSS feed"></a></div></div></div></footer><script defer src=/assets/js/tobii.min.js></script>
<script defer src=/assets/js/highlight.min.js?1></script>
<script defer src=/assets/js/highlight.gdscript.min.js?1></script>
<script>document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('pre code').forEach(a=>{hljs.highlightBlock(a)}),document.querySelectorAll('[data-post-date]').forEach(a=>{Date.parse(a.dataset.postDate)>Date.now()-1e3*60*60*48&&a.classList.add("post-recent-highlight")}),new Tobii({zoom:!1});const a=document.querySelectorAll('.set-os-download-url');for(let b=0;b<a.length;b++){const c=a[b];let e='download';'version'in c.dataset&&c.dataset.version==='3'&&(e='download/3.x');let d='windows';navigator.platform.indexOf('Mac')!==-1?d='macos':navigator.platform.indexOf('Linux')!==-1&&(d='linux'),c.href=`/${e}/${d}/`}})</script>