<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Godot Engine"><meta name=description content="All about changes and improvements that Godot 4.0 offers to C# developers."><meta name=theme-color content="#3d8fcc"><meta property="og:site_name" content="Godot Engine"><meta property="og:url" content="https://godotengine.org/article/whats-new-in-csharp-for-godot-4-0/"><meta name=twitter:site content="@godotengine"><meta property="og:title" content="What's new in C# for Godot 4.0"><meta property="og:description" content="All about changes and improvements that Godot 4.0 offers to C# developers."><meta property="og:image" content="https://godotengine.org/storage/blog/covers/whats-new-in-csharp-for-godot-4-0.jpg"><meta property="og:type" content="article"><meta name=twitter:card content="summary_large_image"><title>What's new in C# for Godot 4.0</title><link rel=alternate type=application/rss+xml title="Godot News" href=/rss.xml><link rel=icon href=/assets/favicon.png sizes=any><link rel=icon href=/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=/assets/css/main.css?112><link rel=stylesheet href=/assets/css/tobii.min.css><link rel=preload as=font href=/assets/fonts/Montserrat-Bold.woff2 crossorigin><link rel=preload as=font href=/assets/fonts/Montserrat-ExtraBold.woff2 crossorigin><link rel=me href=https://mastodon.gamedev.place/@godotengine><input type=checkbox id=nav_toggle_cb><header><div class="container flex align-center"><div id=nav_head><a href=/ id=logo-link><img class=nav-logo src=/assets/logo.svg width=136 height=48 alt="Godot Engine">
<img class="nav-logo dark-logo" src=/assets/logo_dark.svg width=136 height=48 alt="Godot Engine"></a>
<label for=nav_toggle_cb id=nav_toggle_btn><img src=/assets/icons/hamburger.svg width=24 height=24 alt="Main menu"></label></div><nav id=nav><ul class=left><li><a href=/features/>Features</a><li class=only-on-mobile><a href=/showcase/>Showcase</a><li><a href=/blog/>Blog</a><li><a href=/community/>Community</a><li><a href=/contact/>About</a><li><a href=https://godotengine.org/asset-library/asset>Assets</a></ul><ul class=right><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=https://docs.godotengine.org>Docs</a><li><a href=https://docs.godotengine.org/en/stable/community/contributing/index.html>Contribute</a><li class=fund><a href=https://fund.godotengine.org>❤&#xFE0E; Donate</a></ul></nav></div></header><main><style>body{background-color:var(--background-color)}h1{margin-bottom:8px;margin-top:32px}:not(pre)>code{background:var(--code-background-color);padding:1px 4px;font-size:.95em;border-radius:3px}pre{background:var(--codeblock-background-color);color:var(--codeblock-color)}pre code{display:block;overflow-x:auto;padding:.5em}.date-big{line-height:2;margin-left:32px}article{background-color:var(--base-color);box-shadow:0 3px 2px rgba(0,0,0,.15)}figure{margin:0}figure img{margin:0}article img,article video{max-width:100%;height:auto;display:block;margin:auto;margin-top:16px;margin-bottom:16px}article h1{margin-top:64px}article h2,article h3,article h4{margin-top:42px}.article-info{display:flex;flex-direction:column;gap:8px}.article-metadata{display:flex;gap:24px;align-items:center;font-family:var(--header-font-family);margin-bottom:12px}@media(max-width:900px){.article-metadata{flex-direction:column;align-items:flex-start;gap:16px}}.article-author{color:var(--base-color-text-subtitle-date);font-weight:700;font-size:18px;flex-grow:1;display:flex;gap:12px;align-items:center}.article-author .avatar{border-radius:100%;margin:0}.article-author .by{color:var(--base-color-text-subtitle)}.article-metadata .date{color:var(--base-color-text-subtitle-date)}.article-metadata .date.post-recent-highlight{color:var(--post-recent-highlight-color);opacity:.8}.article-metadata .date.post-recent-highlight::after{font-size:80%;content:"NEW";border:2px solid var(--post-recent-highlight-color);padding:2px 3px;margin-left:8px}.tag.active{filter:saturate(.75)}@media screen and (min-width:900px){article .content{width:70%;margin:auto}}@media(max-width:900px){body{background-color:var(--base-color)}article{background-color:initial;box-shadow:none}article img:first-child,article video:first-child{max-width:100%}}</style><link rel=stylesheet href=/assets/css/highlight.obsidian.min.css><div class=container><article class=padded><div class="content article-container"><figure class=article-cover><img src=/storage/blog/covers/whats-new-in-csharp-for-godot-4-0.jpg title alt=" " class=rounded-lg style=width:100%;height:auto;background-color:initial></figure><div class=article-info><h1>What's new in C# for Godot 4.0</h1><div class=article-metadata><div class=article-author><span>By:</span>
<img class=avatar width=25 height=25 src=/assets/images/authors/raulsantos.webp alt="Raul Santos" loading=lazy>
<span class=by>Raul Santos</span></div><span class=date data-post-date="2023-02-25 17:00:00 +0000">25 February 2023</span></div><div class=tags><a href=/blog/progress-report><div class="tag active">Progress Report</div></a></div></div><div class=article-body><p>The Godot 4.0 release contains <a href=/article/dev-snapshot-godot-4-0-beta-1>multiple changes</a> to almost every area of the engine, and first-party support for C# and .NET is no exception. The main focus of this release has been on modernizing the runtime environment and updating the C# API to be more in line with the engine core. We took care not to sacrifice that aspect of familiarity that many of you seek when picking C# as your main scripting language.<p>In this article, we’ll go into more detail about each of the most important changes.<ul><li><a href=#runtime-changes>Runtime changes</a><li><a href=#engine-interop-with-source-generators>Engine interop with source generators</a><li><a href=#the-new-variant-type>The new Variant type</a><li><a href=#collections-changes>Collections changes</a><li><a href=#signals-as-events>Signals as events</a><li><a href=#callable-support>Callable support</a><li><a href=#int-and-float-changes>Int and Float changes</a><li><a href=#renames>Renames</a><li><a href=#exported-property-improvements>Exported property improvements</a><li><a href=#improved-c-documentation>Improved C# documentation</a><li><a href=#nuget-packages>NuGet packages</a><li><a href=#ide-support>IDE support</a><li><a href=#future>Future</a><ul><li><a href=#global-classes>Global classes</a><li><a href=#mobile-and-web-support>Mobile and web support</a><li><a href=#full-aot-and-trimming-support>Full AOT and trimming support</a><li><a href=#gdextension-support>GDExtension support</a><li><a href=#improve-source-generators-extensibility>Improve Source Generators extensibility</a><li><a href=#editor-unification>Editor unification</a><li><a href=#godot-as-a-library>Godot as a library</a></ul></ul><div class="card card-warning"><p><strong>⚠️ Warning</strong><p>If you have created a Godot project in one of the earlier preview releases of Godot 4.0, you will need to delete the <code>res://.godot/mono</code> directory before opening it in the stable version of the engine. This is required to ensure that no older assemblies are used.<p>Godot 3 projects can be converted to Godot 4.0 with the built-in project converter. Due to limitations of how the project converter works, the converted project will likely require lots of manual fixing before it can be opened with Godot 4.0. Because of numerous changes between the two versions you may want to create a new project from scratch instead of porting it.</div><h2 id=runtime-changes>Runtime changes</h2><p>The main change for C# support is that we moved away from the Mono SDK and we now use the <strong>.NET SDK</strong> to embed the .NET runtime. This means we use the CoreCLR runtime for desktop platforms. Mobile and web platforms are not supported at the moment, and will be worked on for a future Godot 4 release. For the mobile platform specifically we are going to use the Mono runtime.<p>With this change, the Mono module is now called <strong>.NET module</strong>, but the only .NET language officially supported is still <strong>C#</strong>. The Godot API is also now targeting .NET 6, the latest .NET LTS release.<p>For end users this means that they only need to install the latest <a href=https://get.dot.net>.NET SDK</a> to start working with C# in Godot 4. The default target for game projects is .NET 6, allowing you to use modern C# features included in .NET; something that is not easily accessible in Godot 3. It should also be possible to target newer frameworks, although we can’t fully guarantee it would work properly.<p>In Godot 3, which targets .NET Framework 4.7.2 by default, you could use the latest version of C# just as well, because the language version is not inherently tied to the targeted framework. However, this is not true for all features, as some of them require runtime support (such as <a href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-8.0/default-interface-methods>Default Interface Methods</a>). Now that we officially support targeting .NET 6, all features available in C# 10 are supported.<p>Targeting the latest frameworks also allows using the newer APIs included in the Base Class Library (e.g. <code class="language-plaintext highlighter-rouge">DateOnly</code>, <code class="language-plaintext highlighter-rouge">TimeOnly</code>, <code class="language-plaintext highlighter-rouge">PriorityQueue</code>) and benefiting from recent <a href=https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/>performance improvements</a>.<h4 id=relevant-links>Relevant links</h4><ul><li>Merge .NET 6 branch with master (<a href=https://github.com/godotengine/godot/pull/64089>GH-64089</a>).<li><a href=https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-5>What’s new in .NET 5</a>.<li><a href=https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-6>What’s new in .NET 6</a>.<li><a href=https://devblogs.microsoft.com/dotnet/announcing-net-6/>Announcing .NET 6 — The Fastest .NET Yet</a>.</ul><h2 id=engine-interop-with-source-generators>Engine interop with source generators</h2><p>In the past, Godot has used reflection to communicate with the engine. This has worked great so far but it comes with some limitations. We now use <a href=https://devblogs.microsoft.com/dotnet/introducing-c-source-generators/>source generators</a>, which have the following benefits:<ul><li>Generated code is generally faster than reflection.<li>They support <strong>trimming</strong> which reduces the size of the exported assembly and paves the way for full <strong>AOT</strong> support in the future.<li>They allow analyzing user code to <strong>emit diagnostics at compile time</strong>. This means that we can warn you about code that would fail at runtime before you actually execute the game.</ul><p>This change also means that user types which derive from native Godot types (such as <code class="language-plaintext highlighter-rouge">Node</code> or <code class="language-plaintext highlighter-rouge">Resource</code>) need to be declared <code class="language-plaintext highlighter-rouge">partial</code>.<p>Unfortunately, currently this makes it difficult or more cumbersome for third-party source generators to support some workflows. We are looking into ways to support these use cases, so keep an eye out for that in the future.<h4 id=relevant-links-1>Relevant links</h4><ul><li>Merge .NET 6 branch with master (<a href=https://github.com/godotengine/godot/pull/64089>GH-64089</a>).<li>C#: Generators ignore _Ready method in partial classes from another generators (<a href=https://github.com/godotengine/godot/issues/66597>GH-66597</a>).<li>Allow for a way to ensure some source generators run before / after others (<a href=https://github.com/dotnet/roslyn/issues/57239>GH-57239</a>).</ul><h2 id=the-new-variant-type>The new Variant type</h2><p>Previous versions of C# in Godot have used <code class="language-plaintext highlighter-rouge">System.Object</code> to represent Godot’s Variant type, which is a special container for various data types supported by the engine. The problem with that is that <code class="language-plaintext highlighter-rouge">System.Object</code> is the base type for all .NET types, including types that are not supported by Godot. This means that the Godot API allowed using types that would fail at runtime since we wouldn’t be able to convert it to a type that Godot would understand.<p>Now we have a dedicated <code class="language-plaintext highlighter-rouge">Variant</code> struct that represents all the types that Godot supports. This means our API is more strict about which types you can use, and you will get errors at compile time before executing your game.<p>The way the <code class="language-plaintext highlighter-rouge">Variant</code> struct is implemented also avoids boxing value types (such as <code class="language-plaintext highlighter-rouge">int</code> and <code class="language-plaintext highlighter-rouge">float</code>) in cases where it was unavoidable in Godot 3.<p>When using <code class="language-plaintext highlighter-rouge">System.Object</code>, users have been able to take advantage of .NET features such as pattern matching and generics. The new <code class="language-plaintext highlighter-rouge">Variant</code> struct no longer allows to use those features directly. Pattern matching can be replaced with checking the <code class="language-plaintext highlighter-rouge">Variant.VariantType</code> property, while generics can be supported using the <code class="language-plaintext highlighter-rouge">[MustBeVariant]</code> attribute.<p>For more information about how Variants are supported in C#, take a look at the new documentation page about <a href=https://docs.godotengine.org/en/latest/tutorials/scripting/c_sharp/c_sharp_variant.html><em>C# Variant</em></a>.<h4 id=relevant-links-2>Relevant links</h4><ul><li>C#: Represent Variant as its own type instead of System.Object (<a href=https://github.com/godotengine/godot-proposals/issues/3837>GH-3837</a>).<li>Merge .NET 6 branch with master (<a href=https://github.com/godotengine/godot/pull/64089>GH-64089</a>).<li>C#: Optimize Variant conversion callbacks (<a href=https://github.com/godotengine/godot/pull/68310>GH-68310</a>).</ul><h2 id=collections-changes>Collections changes</h2><p>Just like in 3.x, <code class="language-plaintext highlighter-rouge">Array</code> and <code class="language-plaintext highlighter-rouge">Dictionary</code> collections are supported in C# through the types defined in the <code class="language-plaintext highlighter-rouge">Godot.Collections</code> namespace. Godot’s packed arrays, a special type of arrays optimized for memory usage, don’t have their own representation in C#, and normal C# arrays should be used (e.g. <code class="language-plaintext highlighter-rouge">byte[]</code>).<p>Godot APIs are only able to understand these Godot collections, which means anything that interops with Godot’s native side needs to use one of the supported collection types.<p>In 3.x, the non-generic collections used <code class="language-plaintext highlighter-rouge">System.Object</code>, just like .NET non-generic collections. However, thanks to the new <a href=#the-new-variant-type><code class="language-plaintext highlighter-rouge">Variant</code></a> type, Godot C# collections now implement the generic collection interfaces where <code class="language-plaintext highlighter-rouge">T</code> is <code class="language-plaintext highlighter-rouge">Variant</code>. This means that the non-generic collections now only support Variant-compatible types, so you’ll get compile errors when using an invalid type rather than a runtime exception.<p>The generic collections will also validate that the generic <code class="language-plaintext highlighter-rouge">T</code> parameter is one of the Variant-compatible types, since it’s annotated with the new <code class="language-plaintext highlighter-rouge">[MustBeVariant]</code> attribute.<p>Godot collections now implement more utility methods that expose similar functionality to what can be done in other supported languages. Using these instance methods is generally faster than Linq because it avoids marshaling every item in the collection. On top of that, collections also provide an extra utility method, <code class="language-plaintext highlighter-rouge">MakeReadOnly</code>. It allows you to freeze the collections so modifying them is no longer possible.<p>You are not limited to using Godot collections in your own internal logic, of course. The Base Class Library in .NET includes many other collections that can be used. These collections are not going to work with Godot’s API but can still be useful. In 3.x, some .NET collections were supported in very specific scenarios (such as exporting properties). This is no longer supported in 4.0 since it required reflection. Support for .NET collections may be re-introduced in the future, implemented with source generators instead of reflection.<p>To help you choose which collection type to use and when, we have a new documentation page all about <a href=https://docs.godotengine.org/en/latest/tutorials/scripting/c_sharp/c_sharp_collections.html><em>C# Collections</em></a>.<h4 id=relevant-links-3>Relevant links</h4><ul><li>Merge .NET 6 branch with master (<a href=https://github.com/godotengine/godot/pull/64089>GH-64089</a>).<li>C# Export on List not possible anymore (<a href=https://github.com/godotengine/godot/issues/70298>GH-70298</a>).<li>Sync C# Array with Core (<a href=https://github.com/godotengine/godot/pull/71786>GH-71786</a>).<li>Sync C# Dictionary with Core (<a href=https://github.com/godotengine/godot/pull/71984>GH-71984</a>).</ul><h2 id=signals-as-events>Signals as events</h2><p>Godot signals are a great way to implement the Observer pattern. It’s possible to use Godot signals by using the common engine API, such as the <code class="language-plaintext highlighter-rouge">Connect</code> and <code class="language-plaintext highlighter-rouge">EmitSignal</code> methods. But C# developers are more used to using events, as they are more idiomatic.<p>For Godot 4.0, we now generate C# events for all Godot signals, which allows developers to use the event syntax that they are used to and love. As a consequence, subscribing to Godot signals using the event syntax is type-safe.<p>These generated events differ from normal C# events in two ways:<ul><li>These events are disconnected from automatically upon freeing the Godot type that contains the signal.<li>Using the <code class="language-plaintext highlighter-rouge">Invoke</code> method to raise the event is not allowed.</ul><p>We are looking into ways to allow raising events in a type-safe way, so keep an eye out for that in the future.<p>For more information on how to use signals in C#, take a look at the new documentation page about <a href=https://docs.godotengine.org/en/latest/tutorials/scripting/c_sharp/c_sharp_signals.html><em>C# Signals</em></a>.<h4 id=relevant-links-4>Relevant links</h4><ul><li>Fix C# bindings after recent breaking changes (<a href=https://github.com/godotengine/godot/pull/37050>GH-37050</a>).<li>Create a dedicated “C# Signals” page (<a href=https://github.com/godotengine/godot-docs/pull/6643>GH-6643</a>).</ul><h2 id=callable-support>Callable support</h2><p>In Godot 4 we introduce the new <code class="language-plaintext highlighter-rouge">Callable</code> type that represents a method in an object instance or a standalone function. This may sound familiar, because C# already supports a similar concept with delegate types, the <code class="language-plaintext highlighter-rouge">Action</code> and <code class="language-plaintext highlighter-rouge">Func</code> types, and lambdas.<p>In order to support interoperability with the engine, Godot’s C# API implements a <code class="language-plaintext highlighter-rouge">Callable</code> type that can be created from an <code class="language-plaintext highlighter-rouge">Action</code> or a <code class="language-plaintext highlighter-rouge">Func</code>. This also allows developers to use C# lambdas with Godot API.<p><code class="language-plaintext highlighter-rouge">Callable</code>s can be invoked by using the <code class="language-plaintext highlighter-rouge">Call</code> or <code class="language-plaintext highlighter-rouge">CallDeferred</code> methods. We currently don’t support binding values to the parameters in C#. This shouldn’t be a problem when using C# lambdas since they can use closures to support this scenario.<div class="language-csharp highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kt>string</span> <span class=n>name</span> <span class=p>=</span> <span class=s>"John Doe"</span><span class=p>;</span>
<span class=n>Callable</span><span class=p>.</span><span class=nf>From</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nf>SayHello</span><span class=p>(</span><span class=n>name</span><span class=p>));</span>

<span class=k>void</span> <span class=nf>SayHello</span><span class=p>(</span><span class=kt>string</span> <span class=n>name</span><span class=p>)</span>
<span class=p>{</span>
  <span class=n>GD</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>$"Hello, </span><span class=p>{</span><span class=n>name</span><span class=p>}</span><span class=s>"</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></div><h4 id=relevant-links-5>Relevant links</h4><ul><li>Fix C# bindings after recent breaking changes (<a href=https://github.com/godotengine/godot/pull/37050>GH-37050</a>).<li>C#: Reflection-less delegate callables and nested generic Godot collections (<a href=https://github.com/godotengine/godot/pull/67987>GH-67987</a>).</ul><h2 id=int-and-float-changes>Int and Float changes</h2><p>In Godot API the names <code class="language-plaintext highlighter-rouge">INT</code> and <code class="language-plaintext highlighter-rouge">FLOAT</code> are used to mean 64-bit integer and floating types, respectively. This is true even in Godot 3, but in C# we used to marshal those types as 32-bit C# types <code class="language-plaintext highlighter-rouge">int</code> and <code class="language-plaintext highlighter-rouge">float</code>. This led to <a href=https://github.com/godotengine/godot/issues/39609>marshaling issues</a> and potential precision loss. This has been fixed in Godot 4.0, as now we use the same bit-ness as the engine does. This means some APIs have changed from <code class="language-plaintext highlighter-rouge">int</code> to <code class="language-plaintext highlighter-rouge">long</code> and from <code class="language-plaintext highlighter-rouge">float</code> to <code class="language-plaintext highlighter-rouge">double</code>.<p>For vector types, Godot uses 32-bit floats by default (this can be changed by building the engine with <code class="language-plaintext highlighter-rouge">--precision=double</code>). This may lead to some inconvenient situations where values must be converted to <code class="language-plaintext highlighter-rouge">float</code> before using them with vectors. This limitation also applies to some engine core APIs, the most common one being the <code class="language-plaintext highlighter-rouge">delta</code> parameter in <code class="language-plaintext highlighter-rouge">_Process</code> and <code class="language-plaintext highlighter-rouge">_PhysicsProcess</code>. The <code class="language-plaintext highlighter-rouge">Mathf</code> API has been updated to support both <code class="language-plaintext highlighter-rouge">float</code> and <code class="language-plaintext highlighter-rouge">double</code> overloads, which should reduce friction with these changes.<h4 id=relevant-links-6>Relevant links</h4><ul><li>C#: _Process / _PhysicsProcess receive delta as float instead of double (<a href=https://github.com/godotengine/godot/issues/65139>GH-65139</a>).<li>C#: Assume 64-bit types when type has no meta (<a href=https://github.com/godotengine/godot/pull/65168>GH-65168</a>).<li>Reduce the amount of casting required for floating points in C# (<a href=https://github.com/godotengine/godot-proposals/issues/5403>GH-5403</a>).<li>C#: Add float and double overloads to Mathf (<a href=https://github.com/godotengine/godot/pull/71583>GH-71583</a>).</ul><h2 id=renames>Renames</h2><p>A lot of types and members have been renamed in Core with the intention to make names clearer. In C# we took the opportunity to also rename a bunch of APIs in order to more closely follow the <a href=https://learn.microsoft.com/en-us/dotnet/standard/design-guidelines/naming-guidelines>.NET naming guidelines</a>.<p>The <a href=https://learn.microsoft.com/en-us/dotnet/standard/design-guidelines/capitalization-conventions><em>Capitalization Conventions</em></a> guidelines indicate that C# should use PascalCase for all identifiers except parameter names (including acronyms over two letters in length). As a result, some types have been renamed (e.g. <code class="language-plaintext highlighter-rouge">CPUParticles2D</code> is now <code class="language-plaintext highlighter-rouge">CpuParticles2D</code>, <code class="language-plaintext highlighter-rouge">DTLSServer</code> is now <code class="language-plaintext highlighter-rouge">DtlsServer</code>).<p>The <code class="language-plaintext highlighter-rouge">Godot.Object</code> type is now named <code class="language-plaintext highlighter-rouge">GodotObject</code> in order to avoid conflicting with the <code class="language-plaintext highlighter-rouge">System.Object</code> type. This follows the <a href=https://learn.microsoft.com/en-us/dotnet/standard/design-guidelines/names-of-namespaces#namespaces-and-type-name-conflicts><em>Namespaces and Type Name Conflicts</em></a> guidelines:<ul><li>Types in two different namespaces shouldn’t have the same name if those namespaces are often used together.<li>Type names should not conflict with the names of types in the .NET Core namespaces (such as <code class="language-plaintext highlighter-rouge">System</code>).</ul><p>The <a href=https://learn.microsoft.com/en-us/dotnet/standard/design-guidelines/general-naming-conventions#using-abbreviations-and-acronyms><em>General Naming</em></a> guidelines also recommend to avoid abbreviations or contractions as part of identifier names. Acronyms should only be used when they are widely accepted, and even then, only when necessary.<p>This should make Godot’s API more consistent with the rest of the .NET ecosystem, and hopefully avoid some conflicts.<h4 id=relevant-links-7>Relevant links</h4><ul><li>PascalCase naming inconsistencies with C# (<a href=https://github.com/godotengine/godot/issues/28748>GH-28748</a>).<li>C#: Renames to follow .NET naming conventions (<a href=https://github.com/godotengine/godot/pull/69547>GH-69547</a>).</ul><h2 id=exported-property-improvements>Exported property improvements</h2><p>A lot of highly requested features have been implemented in Godot to improve exported properties and the inspector. These features are also supported in C#.<p>In 4.0, you are now able to export properties of type <code class="language-plaintext highlighter-rouge">Node</code> or any derived type directly, without the need to export a <code class="language-plaintext highlighter-rouge">NodePath</code> and retrieve it manually.<p>It’s also now possible to group properties with the new <code class="language-plaintext highlighter-rouge">[ExportCategory]</code>, <code class="language-plaintext highlighter-rouge">[ExportGroup]</code> and <code class="language-plaintext highlighter-rouge">[ExportSubgroup]</code> attributes. Take a look at the updated <a href=https://docs.godotengine.org/en/latest/tutorials/scripting/c_sharp/c_sharp_exports.html><em>C# Exports</em></a> documentation page to learn more about the new attributes.<p>Support for flag enums (annotated with the <code class="language-plaintext highlighter-rouge">[System.Flags]</code> attribute) has also been improved. Exported properties for such enums now show up as checkboxes in the Inspector.<p>Due to <a href=#engine-interop-with-source-generators>engine interop improvements</a> we now use source generators instead of reflection. This means that the attributes are not retrieved at runtime. Instead the source generators generate different code based on the attributes found from the source analysis. This makes it much more difficult to support custom user attributes derived from the Godot attributes. With our current source generator implementation, derived attributes have no effect on user scripts.<p>To prevent a possible confusion, we’ve sealed the attributes to disallow inheriting from them. We are looking into ways to support extending our source generators to allow custom user attributes to affect scripts, so keep an eye out for that in the future.<p>In Godot 4.0, a bunch of new export annotations were added to GDScript. However, we didn’t have time to add equivalent attributes in C#. All those annotations can be replicated with the <code class="language-plaintext highlighter-rouge">[Export]</code> attribute using the right combination of <code class="language-plaintext highlighter-rouge">PropertyHint</code> and <code class="language-plaintext highlighter-rouge">HintString</code> values, until we implement these convenient attributes in a future version of Godot 4.<p>The much anticipated support for exporting <a href=#global-classes>custom resources</a> hasn’t made it in time, unfortunately, and is still in development, but you can expect it to arrive very soon.<h4 id=relevant-links-8>Relevant links</h4><ul><li>Ability to export Node types instead of just NodePaths (<a href=https://github.com/godotengine/godot-proposals/issues/1048>GH-1048</a>).<li>Add ability to export Node pointers as NodePaths (<a href=https://github.com/godotengine/godot/pull/62185>GH-62185</a>).<li>C#: Enable exporting nodes to the inspector (<a href=https://github.com/godotengine/godot/pull/62789>GH-62789</a>).<li>Add grouping annotations for class properties in GDScript (<a href=https://github.com/godotengine/godot/pull/62707>GH-62707</a>).<li>C#: Add an easy and accessible way of organizing export variables (<a href=https://github.com/godotengine/godot-proposals/issues/3451>GH-3451</a>).<li>C#: Add grouping attributes for properties (<a href=https://github.com/godotengine/godot/pull/64742>GH-64742</a>).<li>C#: Preserve order of exported fields/categories (<a href=https://github.com/godotengine/godot/pull/64852>GH-64852</a>).<li>Support explicit values in flag properties, add C# flags support (<a href=https://github.com/godotengine/godot/pull/59327>GH-59327</a>).</ul><h2 id=improved-c-documentation>Improved C# documentation</h2><p>A lot of Godot tutorials and tips you can find online contain samples of GDScript code. To help you with interpreting them into C# equivalents the official documentation has a <a href=https://docs.godotengine.org/en/latest/tutorials/scripting/c_sharp/c_sharp_differences.html>C# differences article</a>, which has also been updated. It now features a complete set of tables with the C# equivalent for every common GDScript API. Sometimes a Godot C# equivalent does not exist because there are more suitable methods in the .NET Base Class Library.<p>The new equivalence tables try to encompass every possible case, and should be a great tool for developers looking to port GDScript code to C#. Let us know if this can be improved!<h4 id=relevant-links-9>Relevant links</h4><ul><li>C#: Add table with equivalent string methods (<a href=https://github.com/godotengine/godot-docs/pull/6442>GH-6442</a>).<li>C#: Add table with equivalent GlobalScope methods (<a href=https://github.com/godotengine/godot-docs/pull/6721>GH-6721</a>).<li>C#: Add table with equivalent Array methods (<a href=https://github.com/godotengine/godot-docs/pull/6677>GH-6677</a>).<li>C#: Add table with equivalent Dictionary methods (<a href=https://github.com/godotengine/godot-docs/pull/6676>GH-6676</a>).<li>Add Color section to C# differences page (<a href=https://github.com/godotengine/godot-docs/pull/6679>GH-6679</a>).</ul><h2 id=nuget-packages>NuGet packages</h2><p>With the Godot 4 release we also start publishing the Godot assemblies to <a href=https://www.nuget.org/packages/GodotSharp>NuGet.org</a>. This allows developers to create third-party libraries that reference Godot assemblies with more ease and convenience.<p>The NuGet packages versioning follows Godot which is similar to <a href=https://semver.org/>semver</a>. This means, in theory, that there should not be breaking changes between minor or patch versions. In practice, while we try to avoid breaking compatibility as much as possible, there may still be some minor breaking changes from time to time.<p>How does breaking compatibility affect your game? If your game references a package <em>MyLibrary</em> which has been built against <em>GodotSharp 4.0.0.0</em>, but your game is using <em>GodotSharp 4.1.0.0</em> which introduces a breaking change, it will cause runtime exceptions, the most common one being <code class="language-plaintext highlighter-rouge">System.MethodNotFoundException</code>.<p>For example, take a look at this method signature:<div class="language-csharp highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>public</span> <span class=k>void</span> <span class=nf>MyMethod</span><span class=p>();</span>
</code></pre></div></div><p>Now, let’s assume this API changes in a future version and the new method signature looks like this:<div class="language-csharp highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>public</span> <span class=k>void</span> <span class=nf>MyMethod</span><span class=p>(</span><span class=kt>int</span> <span class=n>number</span> <span class=p>=</span> <span class=m>42</span><span class=p>);</span>
</code></pre></div></div><p>Even though the parameter is optional, the method now has a different signature. Therefore libraries built against the previous version that invoke <code class="language-plaintext highlighter-rouge">MyMethod</code> won’t be able to find it.<p>Godot implements various systems to preserve compatibility and allow for smooth transition, even when we have to change some fundamental things. You should expect future releases of Godot 4 to work with your Godot 4.0 project, but we still leave the room for the inevitable. In case of completely incompatible changes introduced in minor releases, we promise to provide clear migration instructions and possibly tools for automated conversion. In order to further minimize issues make sure your game project as well as the libraries it uses are all referencing the same <em>GodotSharp</em> version.<h2 id=ide-support>IDE support</h2><p>With the move to the .NET Core CLR runtime, Godot gained support to use the official C# debugger. This means IDEs that support C# and official C# extensions support debugging Godot projects out of the box. Although configuring your IDE may require a few more steps at the moment.<p>Other features of Godot’s IDE extensions for C#, such as our Roslyn completion providers, are planned to be moved out of the extensions and into NuGet packages so that all IDEs can benefit without requiring a dedicated extension.<p>The <a href=https://docs.godotengine.org/en/latest/tutorials/scripting/c_sharp/c_sharp_basics.html#configuring-an-external-editor><em>Configuring an external editor</em></a> section of the C# basics documentation page has yet to be updated to explain how to set up your editor for Godot 4.0. Stay tuned for an updated version.<h4 id=relevant-links-10>Relevant links</h4><ul><li>Make GodotCompletionProviders work via NuGet (<a href=https://github.com/godotengine/godot-csharp-visualstudio/issues/18>GH-18</a>).</ul><h2 id=future>Future</h2><p>Some features didn’t make it in time for Godot 4.0, but are already on our roadmap for a future release (and some are already in the works).<h3 id=global-classes>Global classes</h3><p>Global classes, also known as named scripts, are classes registered in the editor so they can be used more conveniently. These classes appear in the <em>Add Node</em> and <em>Create Resource</em> dialogs. GDScript supports this feature with the <code class="language-plaintext highlighter-rouge">class_name</code> syntax.<p>We tried, but ultimately failed, to bring this feature to C# in time for 4.0. Luckily, there’s already a PR open, so it’s very likely it is going to be ready for the next minor release, Godot 4.1.<h4 id=relevant-links-11>Relevant links</h4><ul><li>Add first-class custom resource support (<a href=https://github.com/godotengine/godot-proposals/issues/18>GH-18</a>).<li>Allow exporting custom resources from/to GDScript, VisualScript, C#, and PluginScript (<a href=https://github.com/godotengine/godot/pull/48201>GH-48201</a>).<li>Script-class-aware Inspector & related controls (<a href=https://github.com/godotengine/godot/pull/62413>GH-62413</a>).<li>Enable QuickOpen to see scripted resources (<a href=https://github.com/godotengine/godot/pull/62417>GH-62417</a>).<li>Add C# resource export (<a href=https://github.com/godotengine/godot/pull/72619>GH-72619</a>).</ul><h3 id=mobile-and-web-support>Mobile and web support</h3><p>We aim to support C# on all the platforms that Godot is available on. Unfortunately, we were unable to implement support for mobile and web platforms for 4.0. These platforms gained support upstream somewhat recently so we didn’t have much time to work on it. The new workloads in .NET 6 should allow us to support the mobile and web platforms really soon, so keep an eye out for that.<h4 id=relevant-links-12>Relevant links</h4><ul><li><a href=https://devblogs.microsoft.com/dotnet/announcing-net-6/>Announcing .NET 6 — The Fastest .NET Yet</a>.</ul><h3 id=full-aot-and-trimming-support>Full AOT and trimming support</h3><p>Support for these features can greatly reduce binary size and enable further performance optimizations. In order to support them, we need to ensure that our libraries are prepared. Dynamically accessed types can’t be trimmed, so we need to avoid reflection as much as possible.<p>Some target platforms don’t support JIT, so we are definitely looking into supporting AOT. We’ll be working on this as we add support for more platforms in future 4.x releases.<h4 id=relevant-links-13>Relevant links</h4><ul><li><a href=https://devblogs.microsoft.com/dotnet/app-trimming-in-net-5/>App Trimming in .NET 5</a>.<li><a href=https://learn.microsoft.com/en-us/dotnet/core/deploying/native-aot/>Native AOT deployment</a>.</ul><h3 id=gdextension-support>GDExtension support</h3><p>The ability to create GDExtensions using C# will enable new and powerful workflows. This would allow us to avoid the limitations of a scripting language implementation, such as <a href=https://github.com/godotengine/godot/issues/15661>relying on file paths</a> to reference C# classes. Users are going to be able to implement C# types that can be registered in Godot’s internal type database, ClassDB, and that would behave as built-in Nodes and Resources.<p>GDExtension is still very new to the engine, and is subject to change. It also has some limitations that would result in UX regressions, if C# moved away from the scripting language implementation. But it also has the potential to reduce some pain points that users have had in the past. In Godot 4.0, C# is still implemented as a scripting language, but we are planning to add support for GDExtension creation using C#. We will be keeping the scripting language implementation for your regular game scripting needs.<p>Consuming APIs provided by a GDExtension is also currently unsupported. We’ll keep working on bridging the gap between GDExtension and C# in future 4.x releases.<h4 id=relevant-links-14>Relevant links</h4><ul><li><a href=https://godotengine.org/article/introducing-gd-extensions/>Introducing GDNative’s successor, GDExtension</a>.</ul><h3 id=improve-source-generators-extensibility>Improve source generators extensibility</h3><p>As mentioned throughout this article, several areas can benefit from allowing users to create their own third-party source generators that can extend what’s currently available. For example, allowing our source generators to be affected by custom user-defined attributes.<p>This is tricky to get right, but we’ll be exploring some ideas in future 4.x releases to see how we can provide some extensibility without requiring users to disable and re-implement all of our source generators.<h3 id=editor-unification>Editor unification</h3><p>Just like Godot 3 before it, Godot 4.0 is going to come with two versions of the editor, one “standard” and one with extra support for C# and .NET. However, the plan for 4.x is to provide one unified editor, that support everything the .NET build currently supports. If you’re a GDScript user, this doesn’t come at any cost for you. But for maintainers and C# developers it greatly simplifies things and allows for more efficient editor development and testing. To keep things slim and flexible, components required to support .NET projects would be downloaded on-demand when the user needs them.<h4 id=relevant-links-15>Relevant links</h4><ul><li>From embedding Mono to Godot as a library and the future (<a href=https://github.com/godotengine/godot-proposals/issues/2333>GH-2333</a>).</ul><h3 id=godot-as-a-library>Godot as a library</h3><p>The concept of Godot as a library and C# being the entry point is something that a lot of users seem to be interested in. We think this could bring many benefits to C# users, it would make it easier to support all the platforms where .NET is available, and stay up-to-date with newer .NET versions.<p>We started exploring this area in 4.0, but it still requires more investigation and work. It’s unlikely to be finished any time soon but we’ll keep working on it in the future.<h4 id=relevant-links-16>Relevant links</h4><ul><li>From embedding Mono to Godot as a library and the future (<a href=https://github.com/godotengine/godot-proposals/issues/2333>GH-2333</a>).</ul><hr><p>As you can see, a lot of work has been done, and more work is in the pipeline. We are constantly looking into more ways to improve performance and usability of the API, and we keep fixing all the bugs that you can find. We are looking forward to see what you think of the .NET module in Godot 4.0. Don’t hesitate to reach out with your feedback! 🙂</div></div></article></div><link rel=stylesheet href=/assets/css/anchor-link.css?1><link rel=stylesheet href=/assets/css/article-cards.css?2><script src=/assets/js/anchor-link.js></script>
<script>document.addEventListener('DOMContentLoaded',()=>{window.applyAnchorLinks('.article-body'),document.querySelectorAll('.article-cover img, .article-body img').forEach(b=>{if(b.classList.contains('lightbox-ignore'))return;const a=document.createElement('a');a.href=b.src,a.classList.add('lightbox'),a.dataset.group='article',b.parentNode.appendChild(a),a.appendChild(b)})})</script></main><footer><div class="container flex footer-container"><div id=copyright><p>© 2007-2024 Juan Linietsky, Ariel Manzur and <a href=https://github.com/godotengine/godot/blob/master/AUTHORS.md target=_blank rel=noopener>contributors</a>.<br>Hosted by the <a href=https://godot.foundation/ target=_blank rel=noopener>Godot Foundation</a>.<br>Website <a href=https://github.com/godotengine/godot-website target=_blank rel=noopener>source code on GitHub</a>.</div><div id=sitemap><ul class=sitemap-group><li><strong>Get Godot</strong><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=/download/archive/>Release Archive</a><li><a href=https://editor.godotengine.org/releases/latest/>Web Editor</a><li>&nbsp;<li><strong>Public Relations</strong><li><a href=/blog/>Blog</a><li><a href=/community/>Communities and Events</a><li><a href=/press/>Press Kit</a></ul><ul class=sitemap-group><li><strong>About Godot</strong><li><a href=/features/>Features</a><li><a href=/showcase/>Showcase</a><li><a href=/education/>Education</a><li><a href=/license/>License</a><li><a href=/code-of-conduct/>Code of Conduct</a><li><a href=/privacy-policy/>Privacy Policy</a><li><a href=https://fund.godotengine.org>Donate</a></ul><ul class=sitemap-group><li><strong>Project Team</strong><li><a href=/governance/>Governance</a><li><a href=/teams/>Teams</a><li>&nbsp;<li><strong>Extra Resources</strong><li><a href=https://godotengine.org/asset-library/asset>Asset Library</a><li><a href=https://docs.godotengine.org>Documentation</a><li><a href=https://github.com/godotengine>Code Repository</a></ul></div><div id=social class=dark-desaturate><h4 class=text-right><a href=/contact/>Contact us</a></h4><div class="flex justify-space-between" style=gap:3px><a href=https://github.com/godotengine target=_blank rel=noopener><img src=/assets/footer/github_logo.svg width=32 height=32 alt=GitHub></a>
<a href=https://mastodon.gamedev.place/@godotengine target=_blank rel=noopener><img src=/assets/footer/mastodon_logo.svg width=32 height=32 alt=Mastodon></a>
<a href=https://twitter.com/godotengine target=_blank rel=noopener><img src=/assets/footer/twitter_logo.svg width=32 height=32 alt=Twitter></a>
<a href=https://www.facebook.com/groups/godotengine/ target=_blank rel=noopener><img src=/assets/footer/facebook_logo.svg width=32 height=32 alt=Facebook></a>
<a href=https://www.reddit.com/r/godot target=_blank rel=noopener><img src=/assets/footer/reddit_logo.svg width=32 height=32 alt=Red​dit></a>
<a href=/rss.xml target=_blank rel=noopener><img src=/assets/footer/feed_logo.svg width=32 height=32 alt="RSS feed"></a></div></div></div></footer><script defer src=/assets/js/tobii.min.js></script>
<script defer src=/assets/js/highlight.min.js?1></script>
<script defer src=/assets/js/highlight.gdscript.min.js?1></script>
<script>document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('pre code').forEach(a=>{hljs.highlightBlock(a)}),document.querySelectorAll('[data-post-date]').forEach(a=>{Date.parse(a.dataset.postDate)>Date.now()-1e3*60*60*48&&a.classList.add("post-recent-highlight")}),new Tobii({zoom:!1});const a=document.querySelectorAll('.set-os-download-url');for(let b=0;b<a.length;b++){const c=a[b];let e='download';'version'in c.dataset&&c.dataset.version==='3'&&(e='download/3.x');let d='windows';navigator.platform.indexOf('Mac')!==-1?d='macos':navigator.platform.indexOf('Linux')!==-1&&(d='linux'),c.href=`/${e}/${d}/`}})</script>