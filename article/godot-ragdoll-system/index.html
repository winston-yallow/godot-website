<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Godot Engine"><meta name=description content="Godot 3.1 is getting many improvements on the physics side, and one of those is the new ragdoll system. Physics maintainer Andrea Catania presents the work he did on this topic and how to get started with physical bones and ragdoll simulation."><meta name=theme-color content="#3d8fcc"><meta property="og:site_name" content="Godot Engine"><meta property="og:url" content="https://godotengine.org/article/godot-ragdoll-system/"><meta name=twitter:site content="@godotengine"><meta property="og:title" content="Godot's ragdoll system"><meta property="og:description" content="Godot 3.1 is getting many improvements on the physics side, and one of those is the new ragdoll system. Physics maintainer Andrea Catania presents the work he did on this topic and how to get started with physical bones and ragdoll simulation."><meta property="og:image" content="https://godotengine.org/storage/app/uploads/public/5af/c2e/449/5afc2e44937d1306025773.png"><meta property="og:type" content="article"><meta name=twitter:card content="summary_large_image"><title>Godot's ragdoll system</title><link rel=alternate type=application/rss+xml title="Godot News" href=/rss.xml><link rel=icon href=/assets/favicon.png sizes=any><link rel=icon href=/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=/assets/css/main.css?112><link rel=stylesheet href=/assets/css/tobii.min.css><link rel=preload as=font href=/assets/fonts/Montserrat-Bold.woff2 crossorigin><link rel=preload as=font href=/assets/fonts/Montserrat-ExtraBold.woff2 crossorigin><link rel=me href=https://mastodon.gamedev.place/@godotengine><input type=checkbox id=nav_toggle_cb><header><div class="container flex align-center"><div id=nav_head><a href=/ id=logo-link><img class=nav-logo src=/assets/logo.svg width=136 height=48 alt="Godot Engine">
<img class="nav-logo dark-logo" src=/assets/logo_dark.svg width=136 height=48 alt="Godot Engine"></a>
<label for=nav_toggle_cb id=nav_toggle_btn><img src=/assets/icons/hamburger.svg width=24 height=24 alt="Main menu"></label></div><nav id=nav><ul class=left><li><a href=/features/>Features</a><li class=only-on-mobile><a href=/showcase/>Showcase</a><li><a href=/blog/>Blog</a><li><a href=/community/>Community</a><li><a href=/contact/>About</a><li><a href=https://godotengine.org/asset-library/asset>Assets</a></ul><ul class=right><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=https://docs.godotengine.org>Docs</a><li><a href=https://docs.godotengine.org/en/stable/community/contributing/index.html>Contribute</a><li class=fund><a href=https://fund.godotengine.org>❤&#xFE0E; Donate</a></ul></nav></div></header><main><style>body{background-color:var(--background-color)}h1{margin-bottom:8px;margin-top:32px}:not(pre)>code{background:var(--code-background-color);padding:1px 4px;font-size:.95em;border-radius:3px}pre{background:var(--codeblock-background-color);color:var(--codeblock-color)}pre code{display:block;overflow-x:auto;padding:.5em}.date-big{line-height:2;margin-left:32px}article{background-color:var(--base-color);box-shadow:0 3px 2px rgba(0,0,0,.15)}figure{margin:0}figure img{margin:0}article img,article video{max-width:100%;height:auto;display:block;margin:auto;margin-top:16px;margin-bottom:16px}article h1{margin-top:64px}article h2,article h3,article h4{margin-top:42px}.article-info{display:flex;flex-direction:column;gap:8px}.article-metadata{display:flex;gap:24px;align-items:center;font-family:var(--header-font-family);margin-bottom:12px}@media(max-width:900px){.article-metadata{flex-direction:column;align-items:flex-start;gap:16px}}.article-author{color:var(--base-color-text-subtitle-date);font-weight:700;font-size:18px;flex-grow:1;display:flex;gap:12px;align-items:center}.article-author .avatar{border-radius:100%;margin:0}.article-author .by{color:var(--base-color-text-subtitle)}.article-metadata .date{color:var(--base-color-text-subtitle-date)}.article-metadata .date.post-recent-highlight{color:var(--post-recent-highlight-color);opacity:.8}.article-metadata .date.post-recent-highlight::after{font-size:80%;content:"NEW";border:2px solid var(--post-recent-highlight-color);padding:2px 3px;margin-left:8px}.tag.active{filter:saturate(.75)}@media screen and (min-width:900px){article .content{width:70%;margin:auto}}@media(max-width:900px){body{background-color:var(--base-color)}article{background-color:initial;box-shadow:none}article img:first-child,article video:first-child{max-width:100%}}</style><link rel=stylesheet href=/assets/css/highlight.obsidian.min.css><div class=container><article class=padded><div class="content article-container"><figure class=article-cover><img src=/storage/app/uploads/public/5af/c2e/449/5afc2e44937d1306025773.png title alt=" " class=rounded-lg style=width:100%;height:auto;background-color:initial></figure><div class=article-info><h1>Godot's ragdoll system</h1><div class=article-metadata><div class=article-author><span>By:</span>
<img class=avatar width=25 height=25 src=/assets/images/authors/default_avatar.svg alt="Andrea Catania" loading=lazy>
<span class=by>Andrea Catania</span></div><span class=date data-post-date="2018-05-16 13:18:30 +0000">16 May 2018</span></div><div class=tags><a href=/blog/progress-report><div class="tag active">Progress Report</div></a></div></div><div class="card card-warning"><p>This article is from <strong>May 2018</strong>, some of its contents might be outdated and no longer accurate.<br>You can find up-to-date information about the engine in the <a href=https://docs.godotengine.org/en/stable/>official documentation</a>.</div><div class=article-body><p>Godot is getting more and more interesting features in this period, and one aspect on which we are focusing on is the Skeleton node.<p>We are working on implementing some features like Inverse Kinematics, Ragdoll, a better animation player, and a state machine player. All these things will allow the developers and artists to apply some animations to their characters easily and at the same time with an awesome result.<p>I’m <a href=https://github.com/AndreaCatania>Andrea Catania</a>, and in this article I will explain how to use the new Ragdoll feature available in Godot (in the <em>master</em> branch coming in Godot 3.1). But I’ll start with a couple lines to introduce myself. I’m the contributor who integrated the <a href=http://bulletphysics.org/wordpress/>Bullet Physics</a> engine in Godot 3.0, which was my first Pull Request about a year ago. I’m now taking care of most physics things and animation (like ragdoll, IK, SoftBody, etc.). I’m a computer graphics and physics passionate, and always looking to learn and discover new things.<p>Now let’s start!<h2 id=how-it-works>How it works</h2><p>To show you how to use it, I will apply it to the Platformer3D demo that can be downloaded <a href=https://github.com/godotengine/godot-demo-projects/tree/master/3d/platformer>on GitHub</a> or on the <a href=https://godotengine.org/asset-library/asset/125>Asset Library</a>.<h4 id=create-physical-bones>Create physical bones</h4><p>The first thing to do is to select the skeleton node (in the player scene of <em>Robi</em> the robot). You will notice that a skeleton button appears on the top bar menu:<p><img src=/storage/app/uploads/public/5af/ab9/c72/5afab9c7200ce584291865.png alt="Skeleton menu"><p>Click it and select the <strong>Create physical skeleton</strong> option. The engine will automatically generate physical bones (with their own shape) for each bone of the skeleton.<p><img src=/storage/app/uploads/public/5af/abb/094/5afabb09460a2307518203.png alt="Generated physical bones"><h4 id=clean-up-the-skeleton>Clean up the skeleton</h4><p>In the picture above, you can see that there are unnecessary physical bones like the MASTER bone, so the first thing to do is to clean up our skeleton by removing these physical bones.<p>The rule is that you should remove all physical bones that are too small to make a difference in the simulation and all utility bones (like the MASTER bone in this case).<blockquote><p>For example, if we take a humanoid skeleton where the hand is comprised of many bones, it’s really useless and wasteful to maintain all bones of the hand. One important thing to do in this case is to remove all physical bones and replace them by one or two bones to simulate the hand.</blockquote><p>To clean up our Robi I chose to remove these physical bones: MASTER, waist, neck, headtracker.
This step is not mandatory but it is recommend to clean up the generated skeleton, so that you end up with an easy to maintain and optimized skeleton structure.<h4 id=collision-shape-adjustment>Collision shape adjustment</h4><p>After cleaning it up you will have to adjust the collision shape and/or the size of physical bones in order to match the part of body that each bone should simulate.<p><img src=/storage/app/uploads/public/5af/afd/4b9/5afafd4b943a5862540602.gif alt="Moving joints of physical bones"><h4 id=joints-adjustment>Joints adjustment</h4><p>After the collision shapes adjustment your ragdoll is ready to be used, but before doing it I like to change the joint between each bone.<p>The joint assigned by default is <strong>Pin Joint</strong> that doesn’t has any constraint. To change it you should select the physical bone then change the type of constraint in the Joint section. It’s possible to change the orientation of constraint and limits.<p><img src=/storage/app/uploads/public/5af/b01/7cd/5afb017cd3171367834249.gif alt="Moving joints of physical bones"><p>Now Robi’s head will move like a real head!<p>My final result is this:<p><img src=/storage/app/uploads/public/5af/b02/33b/5afb0233ba705924328561.png alt="Final physical skeleton"><h4 id=start-and-stop-the-simulation>Start and stop the simulation</h4><p>Now it’s really simple to start the simulation by attaching a GDScript and writing down this code:<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>func _ready():
    physical_bones_start_simulation()
</code></pre></div></div><p>To stop it you can call the function <code class="language-plaintext highlighter-rouge">physical_bones_stop_simulation()</code>.<p><img src=/storage/app/uploads/public/5af/b0b/607/5afb0b607ab79099759831.gif alt="Video of ragdoll simulation"><p>But what if I want to start the simulation for just a few parts of the body? Yes, it’s simple enough to do by changing only one line of code: :P<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>func _ready():
    physical_bones_start_simulation(["r-arm", "l-arm"])
</code></pre></div></div><p>With the code above, we are passing to the engine the names of bones for which we would like to simulate physics, and this is the result:<p><img src=/storage/app/uploads/public/5af/b06/c69/5afb06c693617870253401.gif alt="Ragdoll simulation with only arm bones"><h2 id=collision-layer-and-mask>Collision Layer and Mask</h2><p>Last but not least you have to properly set layer and mask in a way that doesn’t collide with kinematic capsule but collide with ground:<p><img src=/storage/app/uploads/public/5af/c73/2f8/5afc732f8071b214206421.png alt=Untitled.png><h2 id=whats-next>What’s next?</h2><p>The next thing that I will implement is the active ragdolls that will allow us to influence the physical bone position. This mean that the body will tend to maintain a defined position while ragdoll is active.<p>That’s it for now, enjoy ragdolling!</div></div></article></div><link rel=stylesheet href=/assets/css/anchor-link.css?1><link rel=stylesheet href=/assets/css/article-cards.css?2><script src=/assets/js/anchor-link.js></script>
<script>document.addEventListener('DOMContentLoaded',()=>{window.applyAnchorLinks('.article-body'),document.querySelectorAll('.article-cover img, .article-body img').forEach(b=>{if(b.classList.contains('lightbox-ignore'))return;const a=document.createElement('a');a.href=b.src,a.classList.add('lightbox'),a.dataset.group='article',b.parentNode.appendChild(a),a.appendChild(b)})})</script></main><footer><div class="container flex footer-container"><div id=copyright><p>© 2007-2024 Juan Linietsky, Ariel Manzur and <a href=https://github.com/godotengine/godot/blob/master/AUTHORS.md target=_blank rel=noopener>contributors</a>.<br>Hosted by the <a href=https://godot.foundation/ target=_blank rel=noopener>Godot Foundation</a>.<br>Website <a href=https://github.com/godotengine/godot-website target=_blank rel=noopener>source code on GitHub</a>.</div><div id=sitemap><ul class=sitemap-group><li><strong>Get Godot</strong><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=/download/archive/>Release Archive</a><li><a href=https://editor.godotengine.org/releases/latest/>Web Editor</a><li>&nbsp;<li><strong>Public Relations</strong><li><a href=/blog/>Blog</a><li><a href=/community/>Communities and Events</a><li><a href=/press/>Press Kit</a></ul><ul class=sitemap-group><li><strong>About Godot</strong><li><a href=/features/>Features</a><li><a href=/showcase/>Showcase</a><li><a href=/education/>Education</a><li><a href=/license/>License</a><li><a href=/code-of-conduct/>Code of Conduct</a><li><a href=/privacy-policy/>Privacy Policy</a><li><a href=https://fund.godotengine.org>Donate</a></ul><ul class=sitemap-group><li><strong>Project Team</strong><li><a href=/governance/>Governance</a><li><a href=/teams/>Teams</a><li>&nbsp;<li><strong>Extra Resources</strong><li><a href=https://godotengine.org/asset-library/asset>Asset Library</a><li><a href=https://docs.godotengine.org>Documentation</a><li><a href=https://github.com/godotengine>Code Repository</a></ul></div><div id=social class=dark-desaturate><h4 class=text-right><a href=/contact/>Contact us</a></h4><div class="flex justify-space-between" style=gap:3px><a href=https://github.com/godotengine target=_blank rel=noopener><img src=/assets/footer/github_logo.svg width=32 height=32 alt=GitHub></a>
<a href=https://mastodon.gamedev.place/@godotengine target=_blank rel=noopener><img src=/assets/footer/mastodon_logo.svg width=32 height=32 alt=Mastodon></a>
<a href=https://twitter.com/godotengine target=_blank rel=noopener><img src=/assets/footer/twitter_logo.svg width=32 height=32 alt=Twitter></a>
<a href=https://www.facebook.com/groups/godotengine/ target=_blank rel=noopener><img src=/assets/footer/facebook_logo.svg width=32 height=32 alt=Facebook></a>
<a href=https://www.reddit.com/r/godot target=_blank rel=noopener><img src=/assets/footer/reddit_logo.svg width=32 height=32 alt=Red​dit></a>
<a href=/rss.xml target=_blank rel=noopener><img src=/assets/footer/feed_logo.svg width=32 height=32 alt="RSS feed"></a></div></div></div></footer><script defer src=/assets/js/tobii.min.js></script>
<script defer src=/assets/js/highlight.min.js?1></script>
<script defer src=/assets/js/highlight.gdscript.min.js?1></script>
<script>document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('pre code').forEach(a=>{hljs.highlightBlock(a)}),document.querySelectorAll('[data-post-date]').forEach(a=>{Date.parse(a.dataset.postDate)>Date.now()-1e3*60*60*48&&a.classList.add("post-recent-highlight")}),new Tobii({zoom:!1});const a=document.querySelectorAll('.set-os-download-url');for(let b=0;b<a.length;b++){const c=a[b];let e='download';'version'in c.dataset&&c.dataset.version==='3'&&(e='download/3.x');let d='windows';navigator.platform.indexOf('Mac')!==-1?d='macos':navigator.platform.indexOf('Linux')!==-1&&(d='linux'),c.href=`/${e}/${d}/`}})</script>