<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Godot Engine"><meta name=description content="This year we have 3 students working on exciting projects as part of the Google Summer of Code. In this progress report they present their work on refactoring the ColorPicker and its UX, making code editors detachable from the main editor window, and improving the GPU lightmapper."><meta name=theme-color content="#3d8fcc"><meta property="og:site_name" content="Godot Engine"><meta property="og:url" content="https://godotengine.org/article/gsoc-2022-progress-report-1/"><meta name=twitter:site content="@godotengine"><meta property="og:title" content="GSoC 2022 - Progress report #1"><meta property="og:description" content="This year we have 3 students working on exciting projects as part of the Google Summer of Code. In this progress report they present their work on refactoring the ColorPicker and its UX, making code editors detachable from the main editor window, and improving the GPU lightmapper."><meta property="og:image" content="https://godotengine.org/storage/app/uploads/public/62f/3c8/fac/62f3c8fac0406080699461.png"><meta property="og:type" content="article"><meta name=twitter:card content="summary_large_image"><title>GSoC 2022 - Progress report #1</title><link rel=alternate type=application/rss+xml title="Godot News" href=/rss.xml><link rel=icon href=/assets/favicon.png sizes=any><link rel=icon href=/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=/assets/css/main.css?112><link rel=stylesheet href=/assets/css/tobii.min.css><link rel=preload as=font href=/assets/fonts/Montserrat-Bold.woff2 crossorigin><link rel=preload as=font href=/assets/fonts/Montserrat-ExtraBold.woff2 crossorigin><link rel=me href=https://mastodon.gamedev.place/@godotengine><input type=checkbox id=nav_toggle_cb><header><div class="container flex align-center"><div id=nav_head><a href=/ id=logo-link><img class=nav-logo src=/assets/logo.svg width=136 height=48 alt="Godot Engine">
<img class="nav-logo dark-logo" src=/assets/logo_dark.svg width=136 height=48 alt="Godot Engine"></a>
<label for=nav_toggle_cb id=nav_toggle_btn><img src=/assets/icons/hamburger.svg width=24 height=24 alt="Main menu"></label></div><nav id=nav><ul class=left><li><a href=/features/>Features</a><li class=only-on-mobile><a href=/showcase/>Showcase</a><li><a href=/blog/>Blog</a><li><a href=/community/>Community</a><li><a href=/contact/>About</a><li><a href=https://godotengine.org/asset-library/asset>Assets</a></ul><ul class=right><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=https://docs.godotengine.org>Docs</a><li><a href=https://docs.godotengine.org/en/stable/community/contributing/index.html>Contribute</a><li class=fund><a href=https://fund.godotengine.org>❤&#xFE0E; Donate</a></ul></nav></div></header><main><style>body{background-color:var(--background-color)}h1{margin-bottom:8px;margin-top:32px}:not(pre)>code{background:var(--code-background-color);padding:1px 4px;font-size:.95em;border-radius:3px}pre{background:var(--codeblock-background-color);color:var(--codeblock-color)}pre code{display:block;overflow-x:auto;padding:.5em}.date-big{line-height:2;margin-left:32px}article{background-color:var(--base-color);box-shadow:0 3px 2px rgba(0,0,0,.15)}figure{margin:0}figure img{margin:0}article img,article video{max-width:100%;height:auto;display:block;margin:auto;margin-top:16px;margin-bottom:16px}article h1{margin-top:64px}article h2,article h3,article h4{margin-top:42px}.article-info{display:flex;flex-direction:column;gap:8px}.article-metadata{display:flex;gap:24px;align-items:center;font-family:var(--header-font-family);margin-bottom:12px}@media(max-width:900px){.article-metadata{flex-direction:column;align-items:flex-start;gap:16px}}.article-author{color:var(--base-color-text-subtitle-date);font-weight:700;font-size:18px;flex-grow:1;display:flex;gap:12px;align-items:center}.article-author .avatar{border-radius:100%;margin:0}.article-author .by{color:var(--base-color-text-subtitle)}.article-metadata .date{color:var(--base-color-text-subtitle-date)}.article-metadata .date.post-recent-highlight{color:var(--post-recent-highlight-color);opacity:.8}.article-metadata .date.post-recent-highlight::after{font-size:80%;content:"NEW";border:2px solid var(--post-recent-highlight-color);padding:2px 3px;margin-left:8px}.tag.active{filter:saturate(.75)}@media screen and (min-width:900px){article .content{width:70%;margin:auto}}@media(max-width:900px){body{background-color:var(--base-color)}article{background-color:initial;box-shadow:none}article img:first-child,article video:first-child{max-width:100%}}</style><link rel=stylesheet href=/assets/css/highlight.obsidian.min.css><div class=container><article class=padded><div class="content article-container"><figure class=article-cover><img src=/storage/app/uploads/public/62f/3c8/fac/62f3c8fac0406080699461.png title alt=" " class=rounded-lg style=width:100%;height:auto;background-color:initial></figure><div class=article-info><h1>GSoC 2022 - Progress report #1</h1><div class=article-metadata><div class=article-author><span>By:</span>
<img class=avatar width=25 height=25 src=/assets/images/authors/akien.webp alt="Rémi Verschelde" loading=lazy>
<span class=by>Rémi Verschelde</span></div><span class=date data-post-date="2022-08-10 15:05:19 +0000">10 August 2022</span></div><div class=tags><a href=/blog/progress-report><div class="tag active">Progress Report</div></a></div></div><div class="card card-warning"><p>This article is from <strong>August 2022</strong>, some of its contents might be outdated and no longer accurate.<br>You can find up-to-date information about the engine in the <a href=https://docs.godotengine.org/en/stable/>official documentation</a>.</div><div class=article-body><p>Like in previous years, Godot is participating again in the <a href=https://summerofcode.withgoogle.com/>Google Summer of Code</a> program for its 2022 edition.<p>This year we selected 3 projects, and the 3 students and their mentors have now been working on their projects for two months. We asked them to write a progress report to present what they’re working on and the current status.<p>Here are the 3 projects/students with links to the relevant sections in this post:<ul><li><a href=#colorpicker>Refactor and UX updates of ColorPicker</a> by Vitika Soni (<a href=https://github.com/Vitika9>Vitika9</a>)<li><a href=#multiwindow>Multi window code editors</a> by <a href=https://github.com/trollodel>trollodel</a><li><a href=#gpu-lightmapper>GPU lightmapper enhancements</a> by Priyansh Rathi (<a href=https://github.com/techiepriyansh>techiepriyansh</a>)</ul><p>They’ve all been doing outstanding work so far, and we’re looking forward to integrating all those changes in the engine!<hr><p><a id=colorpicker></a><h2 id=refactor-and-ux-updates-of-colorpicker>Refactor and UX updates of ColorPicker</h2><ul><li>Project: Refactor and UX updates of ColorPicker<li>Student: Vitika Soni (<a href=https://github.com/Vitika9>Vitika9</a>)<li>Mentors: Rémi Verschelde (<a href=https://github.com/akien-mga>akien-mga</a>) and Tomasz Chabora (<a href=https://github.com/KoBeWi>KoBeWi</a>)<li>Branches: <a href=https://github.com/Vitika9/godot/tree/gsoc-colorpicker><code class="language-plaintext highlighter-rouge">Vitika9/gsoc-colorpicker</code></a>, <a href=https://github.com/Vitika9/godot/tree/gsoc-colorpicker-ux><code class="language-plaintext highlighter-rouge">Vitika9/gsoc-colorpicker-ux</code></a><li>PRs: <a href=https://github.com/godotengine/godot/pull/62075>#62075</a>, <a href=https://github.com/godotengine/godot/pull/62910>#62910</a></ul><h3 id=project-description>Project description</h3><p>RGB, HSV and Raw modes of <code class="language-plaintext highlighter-rouge">ColorPicker</code> were never properly separated, resulting in lots of messy code like this:<div class="language-c++ highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>if</span> <span class=p>(</span><span class=n>hsv_mode_enabled</span><span class=p>)</span> <span class=p>{</span>
	<span class=n>set_raw_mode</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
	<span class=n>btn_raw</span><span class=o>-&gt;</span><span class=n>set_disabled</span><span class=p>(</span><span class=nb>true</span><span class=p>);</span>
<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>raw_mode_enabled</span><span class=p>)</span> <span class=p>{</span>
	<span class=n>set_hsv_mode</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
	<span class=n>btn_hsv</span><span class=o>-&gt;</span><span class=n>set_disabled</span><span class=p>(</span><span class=nb>true</span><span class=p>);</span>
<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
	<span class=n>btn_raw</span><span class=o>-&gt;</span><span class=n>set_disabled</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
	<span class=n>btn_hsv</span><span class=o>-&gt;</span><span class=n>set_disabled</span><span class=p>(</span><span class=nb>false</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></div><p>With OKHSL mode added in <a href=https://github.com/godotengine/godot/pull/59786>#59786</a>, it was necessary to refactor <code class="language-plaintext highlighter-rouge">ColorPicker</code> to make color modes more maintainable and easier to add, which is covered in this project along with updating its UX.<p>This part of the project was complemented and merged in <a href=https://github.com/godotengine/godot/pull/62075>#62075</a>.<h3 id=separation-of-color-modes>Separation of color modes</h3><p>With the guidance of my mentors, I worked on reimplementing color modes with an object-oriented approach by making separate classes for each color mode like <code class="language-plaintext highlighter-rouge">ColorModeRGB</code>, <code class="language-plaintext highlighter-rouge">ColorModeHSV</code>, etc. and made them inherit from newly made <code class="language-plaintext highlighter-rouge">ColorMode</code> abstract class. <code class="language-plaintext highlighter-rouge">ColorMode</code> has the following methods which get called on the selected instance by <code class="language-plaintext highlighter-rouge">ColorPicker</code>:<ul><li><code class="language-plaintext highlighter-rouge">get_name()</code><li><code class="language-plaintext highlighter-rouge">get_slider_count()</code> (useful if we add CMYK in future)<li><code class="language-plaintext highlighter-rouge">get_slider_step()</code><li><code class="language-plaintext highlighter-rouge">get_slider_label(idx)</code><li><code class="language-plaintext highlighter-rouge">get_slider_max(idx)</code><li><code class="language-plaintext highlighter-rouge">get_slider_value(idx)</code> (getting the slider value from color)<li><code class="language-plaintext highlighter-rouge">get_color()</code> (getting the color value from sliders)<li><code class="language-plaintext highlighter-rouge">slider_draw(which)</code> (function for slider’s <code class="language-plaintext highlighter-rouge">draw</code> signal)<li><code class="language-plaintext highlighter-rouge">apply_theme()</code><li><code class="language-plaintext highlighter-rouge">get_shape_override()</code> (useful for <code class="language-plaintext highlighter-rouge">ColorModeOKHSL</code> as it needs OKHSL circle as picker shape)</ul><h3 id=ux-updates>UX updates</h3><p>Next to this C++ refactoring, I have been working on improving the UX of ColorPicker. I am taking reference from wireframes provided by Taylor Wright (<a href=https://github.com/redlamp>redlamp</a>) which can be found <a href=https://github.com/godotengine/godot-proposals/issues/4353#issuecomment-1098934700>in godot-proposals#4353</a> and trying to follow this design as close as possible. Below are the changes which I have made so far:<table><thead><tr><th>Before<th>Mode selection<th>Shape selection<th>Preset dragging<th>Recent presets<th>Uncolorized sliders<tbody><tr><td><img width=166 alt=image src=/storage/app/media/gsoc/2022-1/colorpicker-before.png><td><img width=155 alt=image src=/storage/app/media/gsoc/2022-1/colorpicker-mode-selection.png><td><img width=155 alt=image src=/storage/app/media/gsoc/2022-1/colorpicker-shape-selection.png><td><img width=153 alt=image src=/storage/app/media/gsoc/2022-1/colorpicker-preset-dragging.png><td><img width=154 alt=image src=/storage/app/media/gsoc/2022-1/colorpicker-recent-presets.png><td><img width=156 alt=image src=/storage/app/media/gsoc/2022-1/colorpicker-uncolorized-sliders.png></table><p>This part of the project is still a work-in-progress, check <a href=https://github.com/godotengine/godot/pull/62910>#62910</a> for details.<h3 id=whats-next>What’s next</h3><p>Firstly, I will complete the UX part, then the next goal is to reimplement picker shapes with the same approach as color modes without breaking anything. Also, there are some bugs to be fixed.<p><a id=multiwindow></a><h2 id=multi-window-code-editors>Multi window code editors</h2><ul><li>Project: Allow undocking the Script editor and the Shader editor<li>Student: <a href=https://github.com/trollodel>trollodel</a><li>Mentors: Hugo Locurcio (<a href=https://github.com/Calinou>Calinou</a>), Michael Alexsander (<a href=https://github.com/YeldhamDev>Yeldham</a>)<li>Branch: <a href=https://github.com/trollodel/godot/tree/gsoc_2022_multiwindow><code class="language-plaintext highlighter-rouge">trollodel/gsoc_2022_multiwindow</code></a><li>PR: <a href=https://github.com/godotengine/godot/pull/62378>#62378</a></ul><h3 id=introduction>Introduction</h3><p>Undocking parts of the Godot editor UI is something quite desired in the community. For things like the Script editor, this means you can move it to another screen, move the undocked window to be side-by-side with the main window, or just using <kbd>Alt+Tab</kbd> to change between the main window and the undocked one.<p>In this project, I’ll focus to make the Script editor and the Shader editor undockable, and keep the undocked windows after editor restarts.<h3 id=current-progress>Current progress</h3><p>Detaching the Script editor and the Shader editor is done for the most part. Let me show a video demonstration of it.</p><video controls muted>
<source src=/storage/app/media/gsoc/2022-1/multiwindow-showcase.mp4 type=video/mp4></video><p>Along with the basic feature and controls, some integrations were done:<ul><li>When the Script editor is undocked, the last selected Viewport is shown.<li>When the Script button is clicked and the Script editor is undocked, the Script editor window is focused.<li>Undocking the code editors can be done using shortcuts and command palette too.</ul><p><img src=/storage/app/media/gsoc/2022-1/multiwindow-command-palette.png alt="Command palette"><h4 id=window-save-and-restore>Window save and restore</h4><p>Undocking the Script editor (or the Shader editor) on every editor restart and placing it in the second screen can be annoying. For this reason, the window positions, sizes, and other information for the code editors are saved when saving the editor layout and restored when the editor is reopened.<p>The new system can take into account changes in the user’s screens, like resolution changes or missing screens, and try to put the undocked window into another position. If the recover fails, the windows is attached into the editor window.<h3 id=future>Future</h3><p>The next step is to implement most of the feature available for the code editor to the docks (which are already undockable).<p>After them, I plan to work on the following tasks:<ul><li>Add an icon for the “Make Floating” button.<li>Add a complex UI instead of the simple “Make Floating” action that allows to choose the screen where to place the undocked window.<li>Add some editor settings to configure the behavior.<li>Test the implement features and fix bugs.</ul><p><a id=gpu-lightmapper></a><h2 id=gpu-lightmapper-enhancements>GPU lightmapper enhancements</h2><ul><li>Project: GPU lightmapper enhancements<li>Student: Priyansh Rathi (<a href=https://github.com/techiepriyansh>techiepriyansh</a>)<li>Mentors: Clay John (<a href=https://github.com/clayjohn>clayjohn</a>), Joan Fons Sanchez (<a href=https://github.com/jfons>jfons</a>)<li>PRs:<ul><li><a href=https://github.com/godotengine/godot/pull/61861>Multi Image Atlases</a> (merged)<li><a href=https://github.com/godotengine/godot/pull/62054>Soft Shadows</a> (merged)<li><a href=https://github.com/godotengine/godot/pull/62987>UV2 Texel Density Debug Draw Mode</a></ul></ul><h3 id=introduction-1>Introduction</h3><p>Godot 4.0 announced its new GPU lightmapper back in 2020. It’s been two years since then, and a lot of work has gone into it. My project aims to further improve the 4.0 GPU lightmapper by porting some of the essential features from the 3.x CPU lightmapper and adding a new debug draw mode for visualizing the texel density of lightmaps.<h3 id=project-overview-and-progress>Project overview and progress</h3><h4 id=multi-image-atlases>Multi-image atlases</h4><p>Previously every <code class="language-plaintext highlighter-rouge">LightmapGI</code> node used to store its lightmap atlas in a single large image. This meant that the larger scenes might refuse to bake because they don’t fit within the size limits of an image. I modified the implementation to allow saving the lightmap atlas as multiple images if it doesn’t fit inside a single image.<h4 id=soft-shadows>Soft shadows</h4><p>The general idea behind soft shadows is to take into account the light source’s size instead of treating the light source as a point. When one also takes the contribution of light rays from parts of the light source other than its centre, there is a gradual transition from shadowed to fully lit instead of an abrupt change.<p>I added support for soft shadows to the GPU lightmapper by incorporating this idea in the lightmapper’s raytracing compute shader.<table><thead><tr><th style=text-align:center>No soft shadows<th style=text-align:center>With soft shadows<tbody><tr><td style=text-align:center><img src=/storage/app/media/gsoc/2022-1/gpu-lightmapper-no-soft-shadows.png alt="No soft shadows"><td style=text-align:center><img src=/storage/app/media/gsoc/2022-1/gpu-lightmapper-with-soft-shadows.png alt="With soft shadows"></table><h4 id=debug-draw-mode-for-texel-density>Debug draw mode for texel density</h4><p>This will be a draw mode that previews the texel density of lightmaps (without actually (re)baking them). It will aid users in adjusting the lightmap scale of their objects.<p><strong>How do you show the texel density visually?</strong><p>The idea is to overlay a checkerboard pattern with the same square size (in texels) on the textures of all the meshes. Upon rendering, the checkerboard pattern will appear diminished in the regions with high texel density, and magnified in the regions with low texel density.<p>For this to work, the <code class="language-plaintext highlighter-rouge">lightmap_size</code> of each object would need to be read from the draw mode’s godot shader. We can conveniently use <a href=/article/godot-40-gets-global-and-instance-shader-uniforms>Godot 4.0’s per-instance uniforms</a> to make this work.<p>I have created a crude proof of concept for this. Here’s a sneak peek:<table><thead><tr><th>UV2 texel density debug draw mode<tbody><tr><td><img src=/storage/app/media/gsoc/2022-1/gpu-lightmapper-uv2-texel-density-debug.png alt="UV2 texel density debug draw mode"></table><h3 id=next-steps>Next steps</h3><p>My priority would be to complete the texel density debug draw mode PR and get it merged. After that, I would like to take up an experimental task related to rendering.<p><strong>Lastly</strong>, shoutout to my awesome mentors (<a href=https://github.com/clayjohn>clayjohn</a> & <a href=https://github.com/jfons>jfons</a>) for always coming up with ingenious ways to get around my blockers!<hr><p>That’s it for this progress report! You’ll hear more about each project once they’re finished at the end of September.<p>A big thankyou to all students for their quality work and creative ideas to implement or improve those features in Godot, and thanks to all the mentors who support them!</div></div></article></div><link rel=stylesheet href=/assets/css/anchor-link.css?1><link rel=stylesheet href=/assets/css/article-cards.css?2><script src=/assets/js/anchor-link.js></script>
<script>document.addEventListener('DOMContentLoaded',()=>{window.applyAnchorLinks('.article-body'),document.querySelectorAll('.article-cover img, .article-body img').forEach(b=>{if(b.classList.contains('lightbox-ignore'))return;const a=document.createElement('a');a.href=b.src,a.classList.add('lightbox'),a.dataset.group='article',b.parentNode.appendChild(a),a.appendChild(b)})})</script></main><footer><div class="container flex footer-container"><div id=copyright><p>© 2007-2024 Juan Linietsky, Ariel Manzur and <a href=https://github.com/godotengine/godot/blob/master/AUTHORS.md target=_blank rel=noopener>contributors</a>.<br>Hosted by the <a href=https://godot.foundation/ target=_blank rel=noopener>Godot Foundation</a>.<br>Website <a href=https://github.com/godotengine/godot-website target=_blank rel=noopener>source code on GitHub</a>.</div><div id=sitemap><ul class=sitemap-group><li><strong>Get Godot</strong><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=/download/archive/>Release Archive</a><li><a href=https://editor.godotengine.org/releases/latest/>Web Editor</a><li>&nbsp;<li><strong>Public Relations</strong><li><a href=/blog/>Blog</a><li><a href=/community/>Communities and Events</a><li><a href=/press/>Press Kit</a></ul><ul class=sitemap-group><li><strong>About Godot</strong><li><a href=/features/>Features</a><li><a href=/showcase/>Showcase</a><li><a href=/education/>Education</a><li><a href=/license/>License</a><li><a href=/code-of-conduct/>Code of Conduct</a><li><a href=/privacy-policy/>Privacy Policy</a><li><a href=https://fund.godotengine.org>Donate</a></ul><ul class=sitemap-group><li><strong>Project Team</strong><li><a href=/governance/>Governance</a><li><a href=/teams/>Teams</a><li>&nbsp;<li><strong>Extra Resources</strong><li><a href=https://godotengine.org/asset-library/asset>Asset Library</a><li><a href=https://docs.godotengine.org>Documentation</a><li><a href=https://github.com/godotengine>Code Repository</a></ul></div><div id=social class=dark-desaturate><h4 class=text-right><a href=/contact/>Contact us</a></h4><div class="flex justify-space-between" style=gap:3px><a href=https://github.com/godotengine target=_blank rel=noopener><img src=/assets/footer/github_logo.svg width=32 height=32 alt=GitHub></a>
<a href=https://mastodon.gamedev.place/@godotengine target=_blank rel=noopener><img src=/assets/footer/mastodon_logo.svg width=32 height=32 alt=Mastodon></a>
<a href=https://twitter.com/godotengine target=_blank rel=noopener><img src=/assets/footer/twitter_logo.svg width=32 height=32 alt=Twitter></a>
<a href=https://www.facebook.com/groups/godotengine/ target=_blank rel=noopener><img src=/assets/footer/facebook_logo.svg width=32 height=32 alt=Facebook></a>
<a href=https://www.reddit.com/r/godot target=_blank rel=noopener><img src=/assets/footer/reddit_logo.svg width=32 height=32 alt=Red​dit></a>
<a href=/rss.xml target=_blank rel=noopener><img src=/assets/footer/feed_logo.svg width=32 height=32 alt="RSS feed"></a></div></div></div></footer><script defer src=/assets/js/tobii.min.js></script>
<script defer src=/assets/js/highlight.min.js?1></script>
<script defer src=/assets/js/highlight.gdscript.min.js?1></script>
<script>document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('pre code').forEach(a=>{hljs.highlightBlock(a)}),document.querySelectorAll('[data-post-date]').forEach(a=>{Date.parse(a.dataset.postDate)>Date.now()-1e3*60*60*48&&a.classList.add("post-recent-highlight")}),new Tobii({zoom:!1});const a=document.querySelectorAll('.set-os-download-url');for(let b=0;b<a.length;b++){const c=a[b];let e='download';'version'in c.dataset&&c.dataset.version==='3'&&(e='download/3.x');let d='windows';navigator.platform.indexOf('Mac')!==-1?d='macos':navigator.platform.indexOf('Linux')!==-1&&(d='linux'),c.href=`/${e}/${d}/`}})</script>