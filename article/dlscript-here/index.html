<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Godot Engine"><meta name=description content="A short introduction to the new GDNative module (formerly DLScript) and how to use it in a project. This is a very early version, but the overall process will stay the same."><meta name=theme-color content="#3d8fcc"><meta property="og:site_name" content="Godot Engine"><meta property="og:url" content="https://godotengine.org/article/dlscript-here/"><meta name=twitter:site content="@godotengine"><meta property="og:title" content="GDNative is here!"><meta property="og:description" content="A short introduction to the new GDNative module (formerly DLScript) and how to use it in a project. This is a very early version, but the overall process will stay the same."><meta property="og:image" content="https://godotengine.org/storage/app/uploads/public/58e/4eb/cb6/58e4ebcb63d98659868573.png"><meta property="og:type" content="article"><meta name=twitter:card content="summary_large_image"><title>GDNative is here!</title><link rel=alternate type=application/rss+xml title="Godot News" href=/rss.xml><link rel=icon href=/assets/favicon.png sizes=any><link rel=icon href=/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=/assets/css/main.css?112><link rel=stylesheet href=/assets/css/tobii.min.css><link rel=preload as=font href=/assets/fonts/Montserrat-Bold.woff2 crossorigin><link rel=preload as=font href=/assets/fonts/Montserrat-ExtraBold.woff2 crossorigin><link rel=me href=https://mastodon.gamedev.place/@godotengine><input type=checkbox id=nav_toggle_cb><header><div class="container flex align-center"><div id=nav_head><a href=/ id=logo-link><img class=nav-logo src=/assets/logo.svg width=136 height=48 alt="Godot Engine">
<img class="nav-logo dark-logo" src=/assets/logo_dark.svg width=136 height=48 alt="Godot Engine"></a>
<label for=nav_toggle_cb id=nav_toggle_btn><img src=/assets/icons/hamburger.svg width=24 height=24 alt="Main menu"></label></div><nav id=nav><ul class=left><li><a href=/features/>Features</a><li class=only-on-mobile><a href=/showcase/>Showcase</a><li><a href=/blog/>Blog</a><li><a href=/community/>Community</a><li><a href=/contact/>About</a><li><a href=https://godotengine.org/asset-library/asset>Assets</a></ul><ul class=right><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=https://docs.godotengine.org>Docs</a><li><a href=https://docs.godotengine.org/en/stable/community/contributing/index.html>Contribute</a><li class=fund><a href=https://fund.godotengine.org>❤&#xFE0E; Donate</a></ul></nav></div></header><main><style>body{background-color:var(--background-color)}h1{margin-bottom:8px;margin-top:32px}:not(pre)>code{background:var(--code-background-color);padding:1px 4px;font-size:.95em;border-radius:3px}pre{background:var(--codeblock-background-color);color:var(--codeblock-color)}pre code{display:block;overflow-x:auto;padding:.5em}.date-big{line-height:2;margin-left:32px}article{background-color:var(--base-color);box-shadow:0 3px 2px rgba(0,0,0,.15)}figure{margin:0}figure img{margin:0}article img,article video{max-width:100%;height:auto;display:block;margin:auto;margin-top:16px;margin-bottom:16px}article h1{margin-top:64px}article h2,article h3,article h4{margin-top:42px}.article-info{display:flex;flex-direction:column;gap:8px}.article-metadata{display:flex;gap:24px;align-items:center;font-family:var(--header-font-family);margin-bottom:12px}@media(max-width:900px){.article-metadata{flex-direction:column;align-items:flex-start;gap:16px}}.article-author{color:var(--base-color-text-subtitle-date);font-weight:700;font-size:18px;flex-grow:1;display:flex;gap:12px;align-items:center}.article-author .avatar{border-radius:100%;margin:0}.article-author .by{color:var(--base-color-text-subtitle)}.article-metadata .date{color:var(--base-color-text-subtitle-date)}.article-metadata .date.post-recent-highlight{color:var(--post-recent-highlight-color);opacity:.8}.article-metadata .date.post-recent-highlight::after{font-size:80%;content:"NEW";border:2px solid var(--post-recent-highlight-color);padding:2px 3px;margin-left:8px}.tag.active{filter:saturate(.75)}@media screen and (min-width:900px){article .content{width:70%;margin:auto}}@media(max-width:900px){body{background-color:var(--base-color)}article{background-color:initial;box-shadow:none}article img:first-child,article video:first-child{max-width:100%}}</style><link rel=stylesheet href=/assets/css/highlight.obsidian.min.css><div class=container><article class=padded><div class="content article-container"><figure class=article-cover><img src=/storage/app/uploads/public/58e/4eb/cb6/58e4ebcb63d98659868573.png title alt=" " class=rounded-lg style=width:100%;height:auto;background-color:initial></figure><div class=article-info><h1>GDNative is here!</h1><div class=article-metadata><div class=article-author><span>By:</span>
<img class=avatar width=25 height=25 src=/assets/images/authors/default_avatar.svg alt=karroffel loading=lazy>
<span class=by>karroffel</span></div><span class=date data-post-date="2017-04-05 00:00:00 +0000">5 April 2017</span></div><div class=tags><a href=/blog/progress-report><div class="tag active">Progress Report</div></a></div></div><div class="card card-warning"><p>This article is from <strong>April 2017</strong>, some of its contents might be outdated and no longer accurate.<br>You can find up-to-date information about the engine in the <a href=https://docs.godotengine.org/en/stable/>official documentation</a>.</div><div class=article-body><p><strong>Edit:</strong> Based on community feedback and to avoid confusion (DLScript is not yet another domain specific language), the module was renamed to <em>GDNative</em>.<hr><p>… at least the first usable version, there’s still work to do, <em>but</em> it’s usable!<p>As some of you might have heard, we were working on a module that lets you use shared libraries as scripts.<p>I’ll explain what GDNative exactly is, what it is <em>not</em>, what you can use it for and lastly show you <em>how</em> to use it.<h2 id=so-what-is-gdnative>So what is GDNative?</h2><p>It is a module for Godot that adds a new “scripting language” to it. I put “scripting language” in quotes because it’s not a language.<p>A “script” in Godot is defined as something that has methods, properties and signals.
It also offers a way to use these things (calling methods, get and set properties…).
Instead of having a text file representing these things (like a GDScript file for example),
GDNative uses shared libraries, which can be attached to nodes via <em>Native</em> “scripts”.<p>In some ways, shared libraries have things in common with scripts.<ul><li>you can load them<li>you can unload them<li>you can load function symbols<li>you can call functions</ul><p>A method in a Native script is just native machine code. You can call third party libraries from that code as well.
You can call GDScript functions from a Native script and vice versa. When C# will be supported optionally, you’ll be able to call C# code as well.<h2 id=so-what-is-gdnative-not>So what is GDNative not?</h2><p>I want to keep this section short. A Native script is not a module.
Modules have access to all the C++ classes available in Godot and can extend engine functionality.
You want a different renderer? Module. You want to add networking capabilities to all nodes (<a href=/article/godots-new-high-level-networking-preview><em>ahem</em></a>)? Modules.<p>“A Native script”, as in “a script you’re writing”, is just a script, just like a GDScript file, so it doesn’t have access to those classes, it also can’t extend engine functionality.
But it has access to the whole script API (aka the class API you know from the <a href=http://docs.godotengine.org/en/latest/classes/>docs</a>).<p>This is one way of communication. A Native script can access the class API and can register methods and properties.<p><img src=/storage/app/media/dlscript/godot_dlscript.png alt=godot_dlscript><p>The other way is like the opposite direction: a Native script can also access code from third party libraries.<p><img src=/storage/app/media/dlscript/godot_dlscript_thirdparty.png alt=godot_dlscript_thirdparty><p>Methods that are registered to the scripting system can call third party code, but a Native script can’t integrate something into the engine - it can only “proxy” direct calls.<p>So Native scripts can’t “hack the engine”, but you can build some nice scripts that enable you to use the steamworks API, or Google Play Services <strong>without recompiling the engine</strong>.<h2 id=what-can-you-use-gdnative-for>What can you use GDNative for?</h2><p>There are basically two big use cases:<ul><li><p><strong>performance critical code</strong>. GDScript is an excellent language for making games and quick prototyping. It was designed with simplicity in mind, not performance. Some users report that they reached GDScript’s limits while e.g. procedurally generating terrain. Since GDNative runs native code it has literally <em>zero</em> overhead when it comes to raw computation power (provided you don’t make calls into the script system all the time).<li><p><strong>binding third party code to Godot</strong>. The nature of dynamic linking allows Native scripts to load other libraries as well - and use those. Like explained above, Native scripts are not a replacement for modules, but for binding an independent library (for example steamworks) it’s a much better choice than developing a module.</ul><h2 id=how-to-use-gdnative>How to use GDNative?</h2><p>This part is like a little tutorial to get you started.<p>I mentioned that GDNative is not a <em>language</em>. It loads shared libraries. These shared libraries can be written in any language you want. Godot just needs to know how to use them.
Because of that, there’s no code editor for GDNative in the Godot editor. Because <em>there is no source code</em>. There only is a shared library, nothing more, nothing less.
So you have to write your code outside of the editor.<p>The GDNative API is a C API. Because writing code in C (especially more “high level code” like you’d write for Godot) can get very messy very fast I wrote C++ bindings.
I’ll show how to use these C++ bindings to write a script for a node.<p>You’ll need a relatively fresh build of Godot (for example from <a href=https://github.com/GodotBuilder/godot-builds/releases/tag/master_20170405>here</a>, or you can build it yourself (or wait for 3.0)).
Like I said, the GDNative API is a C API, so you’ll need headers to access this C API. Additionally you want C++ headers to use the C++ bindings. You can download a <em>starter kit</em> <a href=https://github.com/GodotNativeTools/cpp_bindings/releases/download/starter_kit/godot_cpp_starter_kit.zip>here</a>.<p>This starter kit is just to get you started. It’ll probably be outdated very soon. New versions of the C++ bindings and the C Headers can be found <a href=https://github.com/GodotNativeTools/cpp_bindings>here</a> and <a href=https://github.com/GodotNativeTools/godot_headers>here</a>. Since this is all very WIP, it’s possible that there are no recent uploaded binaries for you on these repos. Just be patient or get in touch with me (you can find out how on the bottom of this blog).<p>Just leave the starter kit alone for now. We’ll create a project and a very basic scene first.
(If you are not familiar with making scenes and setting up nodes you should check out the <a href=http://docs.godotengine.org/en/latest/learning/step_by_step/>step by step tutorial</a>)<h3 id=setting-up-the-scene>Setting up the scene</h3><p>Create a project and set up the scene. I just created a Node2D as the root node, added a KinematicBody2D and a Sprite using the lovely default icon.<p><img src=/storage/app/media/dlscript/tutorial/scene_setup.png alt><p>I saved the scene in the project root with the name <code class="language-plaintext highlighter-rouge">main.tscn</code>.<p>Okay, for now that’s all we do with the scene. Now we’ll set up the code for the library. For that you should unpack the zip file you downloaded earlier in your project root.
Your project directory should now look like this. (and two .dll files lying around there too)<p><img src=/storage/app/media/dlscript/tutorial/project_organization.png alt><h3 id=building-the-library>Building the library</h3><p>The <code class="language-plaintext highlighter-rouge">include</code> directory contains all the needed headers. The <code class="language-plaintext highlighter-rouge">lib</code> directory contains the C++ binding implementation. We’ll also compile our game code library into that directory. The <code class="language-plaintext highlighter-rouge">src</code> directory will contain the source code from which we’ll build the library for our game. It contains a simple build script. Fill in the name of the project (into the variable <code class="language-plaintext highlighter-rouge">project_name</code>) in the SConstruct file.<p>For this example, we’ll create a class called <code class="language-plaintext highlighter-rouge">Player</code> that will move the KinematicBody2D.<p>Add a file <code class="language-plaintext highlighter-rouge">src/init.cpp</code>. For simplicity we’ll have all the code in this file. For a more serious project you’d want to split the code in headers and implementations.<p>Write following code into the <code class="language-plaintext highlighter-rouge">src/init.cpp</code> file:<div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>#include &lt;godot_cpp/Godot.hpp&gt;

#include &lt;godot_cpp/KinematicBody2D.hpp&gt;
#include &lt;godot_cpp/Input.hpp&gt;

using namespace godot;

class Player : public KinematicBody2D {
	GODOT_CLASS(Player, KinematicBody2D)

	float speed = 200; // pixel/second

public:

	void _fixed_process(float delta)
	{
		Vector2 input;

		if (Input::is_action_pressed("ui_up")) {
			input.y -= 1;
		}
		if (Input::is_action_pressed("ui_down")) {
			input.y += 1;
		}
		if (Input::is_action_pressed("ui_left")) {
			input.x -= 1;
		}
		if (Input::is_action_pressed("ui_right")) {
			input.x += 1;
		}

		self-&gt;move(input.normalized() * speed * delta);
	}

	static void _register_methods()
	{
		register_method("_fixed_process", &amp;Player::_fixed_process);
	}

};

GODOT_DLSCRIPT_INIT(godot_dlscript_init_options *options)
{
	register_class&lt;Player&gt;();
}
</code></pre></div></div><p>If you open a terminal in <code class="language-plaintext highlighter-rouge">src/</code> and execute <code class="language-plaintext highlighter-rouge">scons p=linux</code> (or <code class="language-plaintext highlighter-rouge">scons p=windows</code> for windows) then you should see it successfully compile the code into a library in <code class="language-plaintext highlighter-rouge">lib/</code>.<p>Ok, now we only need to do two more things.<ul><li>add a Native script to the KinematicBody2D<li>tell Godot where it can find our library</ul><p>To add a Native script to the node you attach a script as always <em>but select Native and type in “Player” for the class name</em>. Also I’m going to use a built-in-script.<p><img src=/storage/app/media/dlscript/tutorial/attach_script.png alt><p><em>Edit:</em> Since DLScript was renamed to GDNative, the above screenshot is now slightly inaccurate, but should give the idea.<p>This was the “add a Native script to the node” part. Now we need to tell Godot in which library it can find our class definition.<p><img src=/storage/app/media/dlscript/tutorial/new_dllibrary.png alt><p>Then click the small arrow to the right, fill in path to (<code class="language-plaintext highlighter-rouge">lib/</code> + projectname) for your OS.
Then save it under <code class="language-plaintext highlighter-rouge">lib/library.tres</code>.<p><img src=/storage/app/media/dlscript/tutorial/save_dllibrary.png alt><p>If you play the scene now, you should be able to control the icon with your arrow keys.<h2 id=further-notes>Further notes</h2><p>This C++ binding is subject to change. It’s more low level and most stuff is still undocumented (did you notice the <code class="language-plaintext highlighter-rouge">self->move(...)</code>? You need to use <code class="language-plaintext highlighter-rouge">self</code> to refer to the node the current class is attached to).
I’ll write documentation for the C++ bindings. I’ll also write documentation for the C API so the community can create their own language bindings.<p>I also mentioned that the GDNative module still needs some work. For example in-editor initialization of libraries is currently disabled. This feature is required to have exported properties and signals. This doesn’t really make sense without proper reloading of libraries. This is on my TODO list, but everyone is welcome to help with that task.
If you’re interested, message me (<em>karroffel</em>) on IRC or Discord.<p>Thanks for reading this and happy waiting for Godot!</div></div></article></div><link rel=stylesheet href=/assets/css/anchor-link.css?1><link rel=stylesheet href=/assets/css/article-cards.css?2><script src=/assets/js/anchor-link.js></script>
<script>document.addEventListener('DOMContentLoaded',()=>{window.applyAnchorLinks('.article-body'),document.querySelectorAll('.article-cover img, .article-body img').forEach(b=>{if(b.classList.contains('lightbox-ignore'))return;const a=document.createElement('a');a.href=b.src,a.classList.add('lightbox'),a.dataset.group='article',b.parentNode.appendChild(a),a.appendChild(b)})})</script></main><footer><div class="container flex footer-container"><div id=copyright><p>© 2007-2024 Juan Linietsky, Ariel Manzur and <a href=https://github.com/godotengine/godot/blob/master/AUTHORS.md target=_blank rel=noopener>contributors</a>.<br>Hosted by the <a href=https://godot.foundation/ target=_blank rel=noopener>Godot Foundation</a>.<br>Website <a href=https://github.com/godotengine/godot-website target=_blank rel=noopener>source code on GitHub</a>.</div><div id=sitemap><ul class=sitemap-group><li><strong>Get Godot</strong><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=/download/archive/>Release Archive</a><li><a href=https://editor.godotengine.org/releases/latest/>Web Editor</a><li>&nbsp;<li><strong>Public Relations</strong><li><a href=/blog/>Blog</a><li><a href=/community/>Communities and Events</a><li><a href=/press/>Press Kit</a></ul><ul class=sitemap-group><li><strong>About Godot</strong><li><a href=/features/>Features</a><li><a href=/showcase/>Showcase</a><li><a href=/education/>Education</a><li><a href=/license/>License</a><li><a href=/code-of-conduct/>Code of Conduct</a><li><a href=/privacy-policy/>Privacy Policy</a><li><a href=https://fund.godotengine.org>Donate</a></ul><ul class=sitemap-group><li><strong>Project Team</strong><li><a href=/governance/>Governance</a><li><a href=/teams/>Teams</a><li>&nbsp;<li><strong>Extra Resources</strong><li><a href=https://godotengine.org/asset-library/asset>Asset Library</a><li><a href=https://docs.godotengine.org>Documentation</a><li><a href=https://github.com/godotengine>Code Repository</a></ul></div><div id=social class=dark-desaturate><h4 class=text-right><a href=/contact/>Contact us</a></h4><div class="flex justify-space-between" style=gap:3px><a href=https://github.com/godotengine target=_blank rel=noopener><img src=/assets/footer/github_logo.svg width=32 height=32 alt=GitHub></a>
<a href=https://mastodon.gamedev.place/@godotengine target=_blank rel=noopener><img src=/assets/footer/mastodon_logo.svg width=32 height=32 alt=Mastodon></a>
<a href=https://twitter.com/godotengine target=_blank rel=noopener><img src=/assets/footer/twitter_logo.svg width=32 height=32 alt=Twitter></a>
<a href=https://www.facebook.com/groups/godotengine/ target=_blank rel=noopener><img src=/assets/footer/facebook_logo.svg width=32 height=32 alt=Facebook></a>
<a href=https://www.reddit.com/r/godot target=_blank rel=noopener><img src=/assets/footer/reddit_logo.svg width=32 height=32 alt=Red​dit></a>
<a href=/rss.xml target=_blank rel=noopener><img src=/assets/footer/feed_logo.svg width=32 height=32 alt="RSS feed"></a></div></div></div></footer><script defer src=/assets/js/tobii.min.js></script>
<script defer src=/assets/js/highlight.min.js?1></script>
<script defer src=/assets/js/highlight.gdscript.min.js?1></script>
<script>document.addEventListener('DOMContentLoaded',()=>{document.querySelectorAll('pre code').forEach(a=>{hljs.highlightBlock(a)}),document.querySelectorAll('[data-post-date]').forEach(a=>{Date.parse(a.dataset.postDate)>Date.now()-1e3*60*60*48&&a.classList.add("post-recent-highlight")}),new Tobii({zoom:!1});const a=document.querySelectorAll('.set-os-download-url');for(let b=0;b<a.length;b++){const c=a[b];let e='download';'version'in c.dataset&&c.dataset.version==='3'&&(e='download/3.x');let d='windows';navigator.platform.indexOf('Mac')!==-1?d='macos':navigator.platform.indexOf('Linux')!==-1&&(d='linux'),c.href=`/${e}/${d}/`}})</script>